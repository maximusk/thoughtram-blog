




<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Angular's DI allows us to configure the visbility of what gets injected from where. Learn about @Host in this article!">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="thoughtram">
    <title>Host and Visibility in Angular's Dependency Injection by thoughtram</title>
    <meta name="google-site-verification" content="o9eGPEgIETEqYGombq7NiQuBIB_qa6gz1yAL7PxKyK0">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#4D8799">
    <link rel="icon" sizes="192x192" href="/images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="thoughtram">
    <link rel="apple-touch-icon" href="/images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#4D8799">

    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Host and Visibility in Angular's Dependency Injection">
    <meta property="og:description" content="Angular's DI allows us to configure the visbility of what gets injected from where. Learn about @Host in this article!">
    <meta property="og:url" content="http://blog.thoughtram.io/angular/2015/08/20/host-and-visibility-in-angular-2-dependency-injection.html">
    <meta property="og:site_name" content="Articles by thoughtram">
    <meta property="og:image" content="http://blog.thoughtram.io">
    <meta property="og:publisher" content="http://www.facebook.com/thoughtram">

    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Host and Visibility in Angular's Dependency Injection">
    <meta property="twitter:site" content="thoughtram Blog">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
  </head>
  <body class="sub-site">
    <!-- Add your site or app content here -->

    <!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <header class="thtrm-header" role="banner">
      <div class="thtrm-header-bar">
        <div class="thtrm-constraint">
          <a href="http://thoughtram.io" class="thtrm-header-logo-link" title="thoughtram.io Start Page"><h1 class="thtrm-header-logo">thoughtram</h1></a>
          <div class="thtrm-header-menu-wrapper">
            <span role="button" tabindex="0" class="thtrm-header-menu-label">Menu</span>
            <ul class="thtrm-header-menu">
              <li><a title="Training" class="thtrm-header-menu-item" href="http://thoughtram.io/training.html">Training</a></li>
              <li><a title="Code Review" class="thtrm-header-menu-item" href="http://thoughtram.io/code-review.html">Code Review</a></li>
              <li><a title="Casts" class="thtrm-header-menu-item " href="http://casts.thoughtram.io">Casts</a></li>
              <li><a title="Blog" class="thtrm-header-menu-item" href="/">Blog</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <main role="main" class="thtrm-main">
    <div class="thtrm-banner" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%), url('/images/banner/fallback.jpeg');">
        <hgroup class="thtrm-banner-container">
          <div class="thtrm-constraint thtrm-constraint--slim">
            <h2 class="thtrm-banner-text">Host and Visibility in Angular's Dependency Injection</h2>
            <span>by <a href="http://twitter.com/" title="Pascal Precht on Twitter">Pascal Precht</a> on Aug 20, 2015, last updated on Dec 16, 2016<br>11 minute read</span>

          </div>
        </hgroup>
      </div>
      <div class="thtrm-constraint thtrm-constraint--slim">

        <section class="thtrm-ad thtrm-section thtrm-section--is-promo is-sticky">
  <img width="100" src="/images/angular2-shield-inverse.svg">
  <h3 class="thtrm-section-headline">Angular Master Class in Las Palmas</h3>
  <p class="thtrm-section-text">Join our upcoming public training!</p>
  <a href="https://www.codecamps.com/aiff4/" title="Angular Master Class in Las Palmas" id="event-cta" class="thtrm-layout-divider-cta">Get a ticket <strong>&rarr;</strong></a>
</section>

        <div class="thtrm-article">

          <p>In our article on <a href="/angular/2015/05/18/dependency-injection-in-angular-2.html">Dependency Injection in Angular</a> we explored what dependency injection actually is, and how it is implemented in the Angular framework. If you haven’t read that article yet, I highly recommend you doing so, since this article is based on it.</p>

<p>Even though we learned that Angular’s new dependency injection is very flexible and solves pretty much all the problems we have with the dependency injection in AngularJS, there are still a couple of topics that we haven’t discussed yet. One of them is how Angular treats the relationship between <strong>host</strong> and child injectors, and the other one is how the <strong>visibility of dependencies</strong> are handled. In this article we’re going to explore exactly these two topics.</p>

<div class="thtrm-toc is-sticky">
  <h3 class="no_toc" id="table-of-contents">TABLE OF CONTENTS</h3>
<ul id="markdown-toc">
  <li><a href="#understanding-host-relationships" id="markdown-toc-understanding-host-relationships">Understanding host relationships</a></li>
  <li><a href="#restricting-dependency-lookup" id="markdown-toc-restricting-dependency-lookup">Restricting dependency lookup</a></li>
  <li><a href="#dependency-visibility" id="markdown-toc-dependency-visibility">Dependency Visibility</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

</div>

<h2 id="understanding-host-relationships">Understanding host relationships</h2>

<p>Host and visibility are both features in Angular’s dependency injection system, that are very specific to Angular and throughout this article we’ll learn why. For now just keep in mind that we probably don’t need any of these features when using Angular’s DI not in the context of Angular itself. However, once we understood the context and why this feature exist, we’ll also take a look at how this is implemented under the hood, so we all know what’s going on.</p>

<p>Let’s start off by imagining the following scenario. We have three nested components that all do their own thing (because that’s what components do in Angular):</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;component-one&gt;</span>
  <span class="nt">&lt;component-two&gt;</span>
    <span class="nt">&lt;component-three&gt;&lt;/component-three&gt;</span>
  <span class="nt">&lt;/component-two&gt;</span>
<span class="nt">&lt;/component-one&gt;</span></code></pre></div>

<p>As we learned in our article on dependency injection in Angular, each component in Angular creates its own injector. Which means the code above can be translated to something like this:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">injector <span class="o">(</span>&lt;component-one&gt;<span class="o">)</span>
      ^
      |
child injector <span class="o">(</span>&lt;component-two&gt;<span class="o">)</span>
      ^
      |
grand child injector <span class="o">(</span>&lt;component-three&gt;<span class="o">)</span></code></pre></div>

<p>The <code>^</code> symbol just signalises that a child injector is created from it’s parent. To come back to our nice and cozy JavaScript world, we could also translate it to this:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">childInjector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">([],</span> <span class="nx">injector</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">grandChildInjector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">([],</span> <span class="nx">childInjector</span><span class="p">);</span></code></pre></div>

<p>Of course, this code is very simplified and as we can see, there are also no providers passed to any of the injectors. Usually, when injectors are created, there are providers passed to them so we can ask for specific dependencies in our code. Let’s add some actual providers, to see how the relationships between the injectors affect dependency instantiation.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Car</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[</span><span class="nx">Engine</span><span class="p">]</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
<span class="p">]);</span>
<span class="kd">var</span> <span class="nx">childInjector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">([],</span> <span class="nx">injector</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">grandChildInjector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Car</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">Convertible</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
<span class="p">],</span> <span class="nx">childInjector</span><span class="p">);</span></code></pre></div>

<p>The injector tree allows us to define injector providers for a specific component and its children. With the code above, if we ask <code>grandChild</code> for a dependency of type <code>Car</code> we’ll get back an instance of type <code>Convertible</code>, because it defines it’s own provider for that type. However, if we ask for a dependency of type <code>Engine</code>, we simply get an instance of the class <code>Engine</code>, because <code>grandChild</code> will ask it’s parent injector (recursively) until an injector has providers defined for that type. If this is entirely new to you, all this has been covered in our last <a href="/angular/2015/05/18/dependency-injection-in-angular-2.html">article</a> on DI.</p>

<p>Okay, this sounds all very powerful but where does this host thing come into play? Let’s get back to the original code with our three nested components. <code>&lt;component-two&gt;</code> and <code>&lt;component-three&gt;</code> are both children of <code>&lt;component-one&gt;</code>. However, we don’t know yet what’s inside of our components themselves. In Angular, a component always has a view. A component’s view can be in a way <a href="/angular/2015/06/29/shadow-dom-strategies-in-angular2.html">encapsulated</a>, this is due to the fact that, since 2.x, Angular supports Shadow DOM.</p>

<p>For example, here’s what the view of <code>&lt;component-one&gt;</code> could look like:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h1&gt;</span>Component 1<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ng-content&gt;&lt;/ng-content&gt;</span></code></pre></div>

<p>As we can see, the view of a component is just yet another DOM tree. If we configure Angular accordingly, this DOM tree can be Shadow DOM. That’s also why we have an <code>&lt;ng-content&gt;</code> tag there. It’s Angular’s implementation of <strong>content insertion points</strong>, which is another Shadow DOM feature.</p>

<p>Even though we don’t use Shadow DOM, a component still comes with it’s own view that is kind of hidden behind the component itself. This is what makes every component in Angular a <strong>host</strong> of a view. In fact, when speaking just about Shadow DOM, we always need a host element to create a shadow dom for it.</p>

<p><strong>Okay, but how is that related to DI?</strong></p>

<p>That’s a good question! We’ve now seen a couple of times that an injector is always looking up a dependency on it’s parent injector in case it doesn’t have providers for the requested type. That parent injector does pretty much the same until we finally get our dependency. When we think in components, that means that a component’s injector will lookup up a dependency even across boundaries.</p>

<p>To make things a bit more clear, let’s say we have a component <code>&lt;video-player&gt;</code> which comes with the following view.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;video-screen&gt;&lt;/video-screen&gt;</span>
<span class="nt">&lt;video-controls&gt;</span>
  <span class="nt">&lt;play-button&gt;&lt;/play-button&gt;</span>
  <span class="nt">&lt;pause-button&gt;&lt;/pause-button&gt;</span>
<span class="nt">&lt;/video-controls&gt;</span></code></pre></div>

<p>Our <code>&lt;video-player&gt;</code> component consists of a couple of other components. Let’s say that the injector of <code>&lt;video-player&gt;</code> comes with providers for a <code>PlayerService</code>:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'video-player'</span><span class="p">,</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">PlayerService</span> <span class="c1">// shorthand for { provide: PlayerService, deps: [] }</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">class</span> <span class="nx">VideoPlayer</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span></code></pre></div>

<p><code>PlayerService</code> is used by the component’s view components (<code>&lt;play-button&gt;</code>, <code>&lt;pause-button&gt;</code>), to play and pause a video respectively. In order to get an instance of <code>PlayerService</code>, we’d need to inject it like this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span> <span class="p">...</span> <span class="p">})</span>
<span class="kr">class</span> <span class="nx">PlayButton</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">playerService</span><span class="err">:</span> <span class="nx">PlayerService</span><span class="p">)</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Since we have a provider for <code>PlayerService</code> defined in <code>VideoPlayer</code>, its injector will return an instance accordingly and everything works as expected, even if <code>&lt;play-button&gt;</code> doesn’t know anything about that provider. However, in case <code>VideoPlayer</code> wouldn’t define that provider, the lookup will go on and on (even outside the <code>&lt;video-player&gt;</code> component) until either some other component has such a provider, or an error is thrown.</p>

<p>This can be problematic. Just imagine someone uses our code with another <code>&lt;awesome-player&gt;</code> component instead, and it doesn’t have that provider. Our code could end up getting an instance of <code>PlayerService</code> that it actually shouldn’t get. What we need is a way to somehow make sure, that we always get an instance of <code>PlayerService</code> provided by the host video component (wether it’s <code>&lt;video-player&gt;</code>, <code>&lt;awesome-player&gt;</code> or anything else).</p>

<h2 id="restricting-dependency-lookup">Restricting dependency lookup</h2>

<p>Luckily, this is covered by Angular’s dependency injection system. If we need to ask for a dependency and want to make sure that the lookup ends with the current component’s host, we can use the <code>@Host</code> decorator. Here’s our <code>&lt;play-button&gt;</code> component rewritten with the lookup constraint:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span> <span class="p">...</span> <span class="p">})</span>
<span class="kr">class</span> <span class="nx">PlayButton</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="err">@</span><span class="nx">Host</span><span class="p">()</span> <span class="nx">playerService</span><span class="err">:</span> <span class="nx">PlayerService</span><span class="p">)</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>If you don’t know what it’s about with these decorators, you might want to read our article on <a href="/angular/2015/05/03/the-difference-between-annotations-and-decorators.html">annotations and decorators</a>. Now we ensured that <code>PlayerService</code> instance is always instatiated by our component’s host, which is currently our <code>VideoPlayer</code> component.</p>

<h2 id="dependency-visibility">Dependency Visibility</h2>

<p>Okay cool, we now know what <code>@Host</code> is and why we need it. But we didn’t talk about the other thing that Angular’s DI introduces yet - dependency visibility. So what is this visibility we’re talking about here? Well, as we learned, we can use the <code>providers</code> property in a <code>@Component</code> decorator to define providers for its injector. However, it turns out that there’s another property <code>viewProviders</code> that basically allows us to do the same thing. What’s the difference between those two then?</p>

<p><code>viewProviders</code> allows us to define injector providers that are only available for a component’s view. Let’s take a closer look at what that means by using our <code>&lt;video-player&gt;</code> component. Our <code>&lt;video-player&gt;</code> component has its own view with its own components. So usually, we would use that component just like this:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;video-player&gt;&lt;video-player&gt;</span></code></pre></div>

<p>But let’s imagine, we change the API and <code>&lt;video-player&gt;</code> expects a child element, that implements a video component (whatever that looks like). So we go ahead an build a <code>&lt;custom-video&gt;</code> component that does exactly that and we use it as a child of <code>&lt;video-player&gt;</code> so it can do it’s job with it:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;video-player&gt;</span>
  <span class="nt">&lt;custom-video&gt;&lt;/custom-video&gt;</span>
<span class="nt">&lt;/video-player&gt;</span></code></pre></div>

<p>Now <code>&lt;video-player&gt;</code> has a child element (with it’s own injector) that it needs to work. Note that this child is part of the Light DOM rather than the video player component’s Shadow DOM (emulation). Next, we realise that <code>&lt;custom-video&gt;</code> needs something of type <code>VideoService</code> in order to work correctly, so we inject it accordingly:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span> <span class="p">...</span> <span class="p">})</span>
<span class="kr">class</span> <span class="nx">CustomVideo</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">videoService</span><span class="err">:</span> <span class="nx">VideoService</span><span class="p">)</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>We know that, if <code>&lt;custom-video&gt;</code> ask its injector for a dependency, the injector will look up the dependency in it’s injector tree if it doesn’t have a provider for that type, until it gets the requested instance. This is quite cool, but now imagine that <code>&lt;video-player&gt;</code> has its own provider for the type <code>VideoService</code>, because it needs a very specific instance for it’s view, in order to work:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'video-player'</span><span class="p">,</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">PlayerService</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">provide</span> <span class="p">:</span> <span class="nx">VideoService</span><span class="p">,</span> <span class="na">useClass</span> <span class="p">:</span> <span class="nx">SpecificVideoService</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">class</span> <span class="nx">VideoPlayer</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span></code></pre></div>

<p>What now happens is, that <code>&lt;custom-video&gt;</code> would get an instance of <code>SpecificVideoService</code> but it actually needs an instance of <code>VideoService</code>. However, due to the lookup that happens in the injector tree, the provider defined in <code>&lt;video-player&gt;</code> is the next one that is available. How can we get around that? This is exactly where <code>viewProviders</code> come in. With <code>viewProviders</code> we can tell the DI system very specifically, which providers are available to which child injectors (Light DOM or Shadow DOM).</p>

<p>To make our code work as expected, all we have to do is to make the <code>VideoService</code> provider of <code>&lt;video-player&gt;</code> explicitly available only for its view:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'video-player'</span><span class="p">,</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">PlayerService</span>
  <span class="p">],</span>
  <span class="na">viewProviders</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">VideoService</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">SpecificVideoService</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">class</span> <span class="nx">VideoPlayer</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span></code></pre></div>

<p>Now, whenever a component of <code>&lt;video-player&gt;</code>’s view asks for something of type <code>VideoService</code>, it’ll get an instance of <code>SpecificVideoService</code> as expected. Other child components from the outside world that ask for the same type however, won’t see this provider and will continue with the lookup in the injector tree. Which means <code>&lt;custom-video&gt;</code> now gets an expected instance from another parent injector without even knowing that <code>&lt;video-player&gt;</code> actually introduces its own provider.</p>

<p><strong>View Providers are also only available in components</strong>, not in directives. That’s simply because a directive doesn’t have its own view.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Angular’s DI is very powerful and doesn’t only cover the common needs when it comes to a decent dependency injection system. It even implements specific use cases for injector trees that are used in conjunction with DOM trees, which could also be encapsulated. I hope this article made clear why we have <code>providers</code>, <code>viewProviders</code> and <code>@Host</code>.</p>


          




        
          <section class="thtrm-ad thtrm-ad--plain thtrm-ad--border thtrm-ad-transparent thtrm-section thtrm-section--is-promo is-sticky">
<a href="https://course.machinelabs.ai" title="Order now!" id="event-cta" ><img src="/images/ml-course-ad.png"></a>
</section>


        </div>

        <div class="thtrm-subscriber">
  <h3>Get updates on new articles and trainings.</h3>
  <p>Join over 2400 other developers who get our content first.</p>
  <form action="//thoughtram.us8.list-manage.com/subscribe/post?u=dfbb1507fbced5a20d9dc5698&amp;id=731f22cdca" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
    <label for="mce-EMAIL"></label>
    <input type="email" value="" name="EMAIL" placeholder="Your email address..." required>
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_dfbb1507fbced5a20d9dc5698_731f22cdca" tabindex="-1" value=""></div>
    <input type="submit" value="Subscribe" name="subscribe" class="thtrm-cta thtrm-cta--small">
  </form>
  <p class="thtrm-form__info-text">Information on the performance measurement included in the consent, the use of the mail service provider MailChimp and on the logging of the registration and your rights of revocation can be found in our <a href="https://thoughtram.io/imprint.html" title="Privacy Statement">data protection declaration</a>.</p>
</div>



        <div class="thtrm-social-links">
            <!-- Sharingbutton Facebook -->
            <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.thoughtram.io/angular/2015/08/20/host-and-visibility-in-angular-2-dependency-injection.html" target="_blank" aria-label="Share on Facebook">
              <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M18.768,7.465H14.5V5.56c0-0.896,0.594-1.105,1.012-1.105s2.988,0,2.988,0V0.513L14.171,0.5C10.244,0.5,9.5,3.438,9.5,5.32 v2.145h-3v4h3c0,5.212,0,12,0,12h5c0,0,0-6.85,0-12h3.851L18.768,7.465z"/>
                    </g>
                </svg>
                </div>Share on Facebook</div>
            </a>

            <!-- Sharingbutton Twitter -->
            <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Host%20and%20Visibility%20in%20Angular's%20Dependency%20Injection&amp;url=http://blog.thoughtram.io/angular/2015/08/20/host-and-visibility-in-angular-2-dependency-injection.html" target="_blank" aria-label="Share on Twitter">
              <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M23.444,4.834c-0.814,0.363-1.5,0.375-2.228,0.016c0.938-0.562,0.981-0.957,1.32-2.019c-0.878,0.521-1.851,0.9-2.886,1.104 C18.823,3.053,17.642,2.5,16.335,2.5c-2.51,0-4.544,2.036-4.544,4.544c0,0.356,0.04,0.703,0.117,1.036 C8.132,7.891,4.783,6.082,2.542,3.332C2.151,4.003,1.927,4.784,1.927,5.617c0,1.577,0.803,2.967,2.021,3.782 C3.203,9.375,2.503,9.171,1.891,8.831C1.89,8.85,1.89,8.868,1.89,8.888c0,2.202,1.566,4.038,3.646,4.456 c-0.666,0.181-1.368,0.209-2.053,0.079c0.579,1.804,2.257,3.118,4.245,3.155C5.783,18.102,3.372,18.737,1,18.459 C3.012,19.748,5.399,20.5,7.966,20.5c8.358,0,12.928-6.924,12.928-12.929c0-0.198-0.003-0.393-0.012-0.588 C21.769,6.343,22.835,5.746,23.444,4.834z"/>
                    </g>
                </svg>
                </div>Share on Twitter</div>
            </a>

            <!-- Sharingbutton Google+ -->
            <a class="resp-sharing-button__link" href="https://plus.google.com/share?url=http%3A%2F%2Fblog.thoughtram.io/angular/2015/08/20/host-and-visibility-in-angular-2-dependency-injection.html" target="_blank" aria-label="Share on Google+">
              <div class="resp-sharing-button resp-sharing-button--google resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M11.366,12.928c-0.729-0.516-1.393-1.273-1.404-1.505c0-0.425,0.038-0.627,0.988-1.368 c1.229-0.962,1.906-2.228,1.906-3.564c0-1.212-0.37-2.289-1.001-3.044h0.488c0.102,0,0.2-0.033,0.282-0.091l1.364-0.989 c0.169-0.121,0.24-0.338,0.176-0.536C14.102,1.635,13.918,1.5,13.709,1.5H7.608c-0.667,0-1.345,0.118-2.011,0.347 c-2.225,0.766-3.778,2.66-3.778,4.605c0,2.755,2.134,4.845,4.987,4.91c-0.056,0.22-0.084,0.434-0.084,0.645 c0,0.425,0.108,0.827,0.33,1.216c-0.026,0-0.051,0-0.079,0c-2.72,0-5.175,1.334-6.107,3.32C0.623,17.06,0.5,17.582,0.5,18.098 c0,0.501,0.129,0.984,0.382,1.438c0.585,1.046,1.843,1.861,3.544,2.289c0.877,0.223,1.82,0.335,2.8,0.335 c0.88,0,1.718-0.114,2.494-0.338c2.419-0.702,3.981-2.482,3.981-4.538C13.701,15.312,13.068,14.132,11.366,12.928z M3.66,17.443 c0-1.435,1.823-2.693,3.899-2.693h0.057c0.451,0.005,0.892,0.072,1.309,0.2c0.142,0.098,0.28,0.192,0.412,0.282 c0.962,0.656,1.597,1.088,1.774,1.783c0.041,0.175,0.063,0.35,0.063,0.519c0,1.787-1.333,2.693-3.961,2.693 C5.221,20.225,3.66,19.002,3.66,17.443z M5.551,3.89c0.324-0.371,0.75-0.566,1.227-0.566l0.055,0 c1.349,0.041,2.639,1.543,2.876,3.349c0.133,1.013-0.092,1.964-0.601,2.544C8.782,9.589,8.363,9.783,7.866,9.783H7.865H7.844 c-1.321-0.04-2.639-1.6-2.875-3.405C4.836,5.37,5.049,4.462,5.551,3.89z"/>
                        <polygon points="23.5,9.5 20.5,9.5 20.5,6.5 18.5,6.5 18.5,9.5 15.5,9.5 15.5,11.5 18.5,11.5 18.5,14.5 20.5,14.5 20.5,11.5  23.5,11.5   "/>
                    </g>
                </svg>
                </div>Share on Google+</div>
            </a>
        </div>

        <h3 class="thtrm-section-headline thtrm-section-headline--with-margin">Author</h3>
        <div class="thtrm-article-author">
          <span class="thtrm-article-author-avatar"><img src="/images/author-pascal.jpg" alt="Picture of Pascal Precht"></span>
          <div class="thtrm-article-author-matter">
            <h4 class="thtrm-article-author-name">Pascal Precht</h4>
            <p class="thtrm-article-author-text">Pascal is a front-end engineer and a Angular Developer Expert nominated by Google. He created the angular-translate module, is an Angular contributor and also part of the Angular Docs Authoring team.</p>
            <p>
              <a class="thtrm-article-author-cta thtrm-article-author-cta-twitter" href="http://twitter.com/PascalPrecht" title="Pascal Precht on Twitter">Twitter</a>
              <a class="thtrm-article-author-cta" href="http://github.com/PascalPrecht" title="Pascal Precht on GitHub">GitHub</a>
            </p>
          </div>
        </div>
      </div>

      <div class="thtrm-constraint">

        
        <h4 class="thtrm-section-headline thtrm-section-headline--with-big-margin thtrm-section-headline--centered">Related Posts</h4>
        <ul class="thtrm-three-column-list thtrm-three-column-list--with-padding">
        
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2018/03/05/advanced-caching-with-rxjs.html" title="Advanced caching with RxJS">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/advanced_caching.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Advanced caching with RxJS</h3>
                <p>When building web applications, performance should always be a top priority. One very efficient way to optimize the performance of...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/27/custom-overlays-with-angulars-cdk-part-two.html" title="Custom Overlays with Angular's CDK - Part 2">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/custom_overlays_2.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Custom Overlays with Angular's CDK - Part 2</h3>
                <p>In this follow-up post we demonstrate how to use Angular's CDK to build a custom overlay that looks and feels...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/20/custom-overlays-with-angulars-cdk.html" title="Custom Overlays with Angular's CDK">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/custom_overlays.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Custom Overlays with Angular's CDK</h3>
                <p>The Angular Material CDK provides us with tools to build awesome and high-quality Angular components without adopting the Material Design...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/13/easy-dialogs-with-angular-material.html" title="Easy Dialogs with Angular Material">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/easy-dialogs-with-angular-material.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Easy Dialogs with Angular Material</h3>
                <p>Building modals and dialogs isn't easy - if we do it ourselves. Angular Material comes with a powerful dialog service...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/07/26/a-web-animations-deep-dive-with-angular.html" title="A web animations deep dive with Angular">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/angular-animations.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>A web animations deep dive with Angular</h3>
                <p>Angular comes with a built-in animation system that lets us create powerful animations based on the Web Animations API. In...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/05/23/custom-themes-with-angular-material.html" title="Custom themes with Angular Material">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/custom-themes-with-angular-material.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Custom themes with Angular Material</h3>
                <p>Angular Material offers great theming capabilities for both, built-in and custom themes. In this article we'll explore how to make...</p>
              </div>
            </a>
          </li>
        
        
        </ul>
        

      

      </div>
    </main>
    <footer role="contentinfo" class="thtrm-footer thtrm-footer--slim">
  <div class="thtrm-footer-text">
    <img class="thtrm-footer-logo" alt="thoughtram brain" src="/images/thoughtram-brain-white.png">
    <p>This website was created in collaboration with <a href="http://twitter.com/timche_" title="Tim Cheung on Twitter"><strong>Tim Cheung</strong></a> and <a href="http://twitter.com/tim_hartmann_" title="Tim Hartmann on Twitter"><strong>Tim Hartmann</strong></a>.</p>
    <p ><a href="http://thoughtram.io/code-of-conduct.html" title="Code of Conduct">Code of Conduct</a> &bullet; <a href="http://thoughtram.io/imprint.html" title="Legal Notice">Legal notice</a></p>
    <p class="thtrm-footer-bottom">&copy; 2014-2017 thoughtram GmbH</p>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51360648-2', 'auto');
ga('send', 'pageview');

var form = document.getElementById('search-form');
var eventCta = document.getElementById('event-cta');

if (eventCta) {

  eventCta.addEventListener('click', function (event) {
    event.preventDefault();

    setTimeout(clickLink, 1000);

    function clickLink() {
      window.location.replace(eventCta.getAttribute('href'));
    }

    ga('send', 'event', {
      eventCategory: 'Event Link',
      eventAction: 'click',
      eventLabel: eventCta.getAttribute('title'),
      hitCallback: clickLink
    });
  });
}

if (form) {

  var searchTerm = document.getElementById('search-term');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    var formSubmitted = false;

    setTimeout(submitForm, 1000);

    function submitForm() {
      if (!formSubmitted) {
        formSubmitted = true;
        form.submit();
      }
    }

    ga('send', 'event', {
      eventCategory: 'Search Form',
      eventAction: 'submit',
      eventLabel: searchTerm.value,
      hitCallback: submitForm
    });
  });
}
</script>



    <script src="/scripts/linkjuice/dist/linkjuice.js"></script>
    <script src="/scripts/main.js"></script>
  </body>
</html>
