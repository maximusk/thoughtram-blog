




<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Angular implements a very powerful dependency injection system that makes reusing services easy and flexible. Learn how it works!">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="thoughtram">
    <title>Dependency Injection in Angular by thoughtram</title>
    <meta name="google-site-verification" content="o9eGPEgIETEqYGombq7NiQuBIB_qa6gz1yAL7PxKyK0">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#4D8799">
    <link rel="icon" sizes="192x192" href="/images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="thoughtram">
    <link rel="apple-touch-icon" href="/images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#4D8799">

    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Dependency Injection in Angular">
    <meta property="og:description" content="Angular implements a very powerful dependency injection system that makes reusing services easy and flexible. Learn how it works!">
    <meta property="og:url" content="http://blog.thoughtram.io/angular/2015/05/18/dependency-injection-in-angular-2.html">
    <meta property="og:site_name" content="Articles by thoughtram">
    <meta property="og:image" content="http://blog.thoughtram.io">
    <meta property="og:publisher" content="http://www.facebook.com/thoughtram">

    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Dependency Injection in Angular">
    <meta property="twitter:site" content="thoughtram Blog">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
  </head>
  <body class="sub-site">
    <!-- Add your site or app content here -->

    <!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <header class="thtrm-header" role="banner">
      <div class="thtrm-header-bar">
        <div class="thtrm-constraint">
          <a href="http://thoughtram.io" class="thtrm-header-logo-link" title="thoughtram.io Start Page"><h1 class="thtrm-header-logo">thoughtram</h1></a>
          <div class="thtrm-header-menu-wrapper">
            <span role="button" tabindex="0" class="thtrm-header-menu-label">Menu</span>
            <ul class="thtrm-header-menu">
              <li><a title="Training" class="thtrm-header-menu-item" href="http://thoughtram.io/training.html">Training</a></li>
              <li><a title="Code Review" class="thtrm-header-menu-item" href="http://thoughtram.io/code-review.html">Code Review</a></li>
              <li><a title="Casts" class="thtrm-header-menu-item " href="http://casts.thoughtram.io">Casts</a></li>
              <li><a title="Blog" class="thtrm-header-menu-item" href="/">Blog</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <main role="main" class="thtrm-main">
    <div class="thtrm-banner" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%), url('/images/banner/fallback.jpeg');">
        <hgroup class="thtrm-banner-container">
          <div class="thtrm-constraint thtrm-constraint--slim">
            <h2 class="thtrm-banner-text">Dependency Injection in Angular</h2>
            <span>by <a href="http://twitter.com/" title="Pascal Precht on Twitter">Pascal Precht</a> on May 18, 2015, last updated on Aug 8, 2017<br>23 minute read</span>

          </div>
        </hgroup>
      </div>
      <div class="thtrm-constraint thtrm-constraint--slim">

        <div class="thtrm-article">
          <section class="thtrm-ad thtrm-ad--plain thtrm-ad--border thtrm-ad-transparent thtrm-section thtrm-section--is-promo is-sticky">
<a href="https://course.machinelabs.ai" title="Order now!" id="event-cta" ><img src="/images/ml-course-ad.png"></a>
</section>



          <p>Dependency injection has always been one of Angular’s biggest features and selling points. It allows us to inject dependencies in different components across our applications, without needing to know, how those dependencies are created, or what dependencies they need themselves. However, it turns out that the current dependency injection system in Angular 1.x has some problems that need to be solved in Angular 2.x, in order to build the next generation framework. In this article, we’re going to explore the new dependency injection system for future generations.</p>

<p style="text-align: center; margin-bottom: -1em;"><strong>Want to see things in action first?</strong></p>

<p class="thtrm-ctas">

  
    <a href="#demos" class="thtrm-cta thtrm-cta--small"><i class="material-icons">code</i> View Demos</a>
  

  
    <a href="#videos" class="thtrm-cta thtrm-cta--small"><i class="material-icons">play_arrow</i> Play videos</a>
  

</p>

<p>Before we jump right into the new stuff, lets first understand what dependency injection is, and what the problems with the DI in Angular 1 are.</p>

<div class="thtrm-tldr">

  <h3 id="tldr">TLDR;</h3>

  <p>An injector creates dependencies using providers. Providers are recipes that know how to create dependencies. Type annotations in TypeScript can be used to ask for dependencies and Every component has its own injector, resulting in an injector tree. The injector tree enables transient dependencies.</p>

  <h4 id="how-to-inject-a-service-in-angular">How to inject a service in Angular?</h4>

  <ol>
    <li>Create a provider either on your <code class="highlighter-rouge">@NgModule</code>, <code class="highlighter-rouge">@Component</code>, or <code class="highlighter-rouge">@Directive</code> using a type or a string as provider token.</li>
    <li>Inject the service in the component’s constructor where it’s needed using that configured token.</li>
  </ol>
</div>

<div class="thtrm-toc is-sticky">
  <h3 class="no_toc" id="table-of-contents">TABLE OF CONTENTS</h3>
<ul id="markdown-toc">
  <li><a href="#tldr" id="markdown-toc-tldr">TLDR;</a>    <ul>
      <li><a href="#how-to-inject-a-service-in-angular" id="markdown-toc-how-to-inject-a-service-in-angular">How to inject a service in Angular?</a></li>
    </ul>
  </li>
  <li><a href="#dependency-injection-as-a-pattern" id="markdown-toc-dependency-injection-as-a-pattern">Dependency Injection as a pattern</a></li>
  <li><a href="#dependency-injection-as-a-framework" id="markdown-toc-dependency-injection-as-a-framework">Dependency Injection as a framework</a></li>
  <li><a href="#dependency-injection-in-angular" id="markdown-toc-dependency-injection-in-angular">Dependency Injection in Angular</a>    <ul>
      <li><a href="#attention" id="markdown-toc-attention">Attention</a></li>
    </ul>
  </li>
  <li><a href="#other-provider-configurations" id="markdown-toc-other-provider-configurations">Other provider configurations</a></li>
  <li><a href="#optional-dependencies" id="markdown-toc-optional-dependencies">Optional Dependencies</a></li>
  <li><a href="#transient-dependencies-and-child-injectors" id="markdown-toc-transient-dependencies-and-child-injectors">Transient Dependencies and Child Injectors</a></li>
  <li><a href="#new-staticinjector-apis" id="markdown-toc-new-staticinjector-apis">New StaticInjector APIs</a></li>
  <li><a href="#how-is-it-used-in-angular-then" id="markdown-toc-how-is-it-used-in-angular-then">How is it used in Angular then?</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

</div>

<h2 id="dependency-injection-as-a-pattern">Dependency Injection as a pattern</h2>

<p><a href="http://twitter.com/vojtajina">Vojta Jina</a> gave a great talk on dependency injection at <a href="https://www.youtube.com/watch?v=_OGGsf1ZXMs">ng-conf 2014</a>. In this talk, he presented the story and ideas of the new DI system that will be developed for Angular. He also made very clear, that we can see DI as two things: As a design pattern and as a framework. Whereas the former explains the pattern that DI is all about, the latter can be a system that helps us out maintaining and assembling dependencies. I’d like to do the same in this article as it helps us understanding the concept first.</p>

<p>We start by taking a look at the following code and analysing the problems it introduces.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Engine</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tires</span> <span class="o">=</span> <span class="nx">Tires</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'doors'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Nothing special here. We have a class <code class="highlighter-rouge">Car</code> that has a constructor in which we set up everything we need in order to construct a car object once needed. What’s the problem with this code? Well, as you can see, the constructor not only assigns needed dependencies to internal properties, it also knows how those object are created. For example the engine object is created using the <code class="highlighter-rouge">Engine</code> constructor, <code class="highlighter-rouge">Tires</code> seems to be a singleton interface and the doors are requested via a global object that acts as a <strong>service locator</strong>.</p>

<p>This leads to code that is hard to maintain and even harder to test. Just imagine you’d like to test this class. How would you replace <code class="highlighter-rouge">Engine</code> with a <code class="highlighter-rouge">MockEngine</code> dependency in that code? When writing tests, we want to test different scenarios that our code is used in, hence each scenario needs its own configuration. If we want to write testable code, we need to write reusable code. Our code should work in any environment as long as all dependencies are satisfied. Which brings us to the conclusion that <strong>testable code is reusable code</strong> and vise versa.</p>

<p>So how can we write this code better and make it more testable? It’s super easy and you probably already know what to do. We change our code to this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">engine</span><span class="p">,</span> <span class="nx">tires</span><span class="p">,</span> <span class="nx">doors</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">engine</span> <span class="o">=</span> <span class="nx">engine</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tires</span> <span class="o">=</span> <span class="nx">tires</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="nx">doors</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>All we did is we moved the dependency creation out of the constructor and extended the constructor function to expect all needed dependencies. There are no concrete implementations anymore in this code, we literally moved the responsibility of creating those dependencies to a higher level. If we want to create a car object now, all we have to do is to pass all needed dependencies to the constructor:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span>
  <span class="k">new</span> <span class="nx">Engine</span><span class="p">(),</span>
  <span class="k">new</span> <span class="nx">Tires</span><span class="p">(),</span>
  <span class="k">new</span> <span class="nx">Doors</span><span class="p">()</span>
<span class="p">);</span></code></pre></figure>

<p>How cool is that? The dependencies are now decoupled from our class, which allows us to pass in mocked dependencies in case we’re writing tests:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span>
  <span class="k">new</span> <span class="nx">MockEngine</span><span class="p">(),</span>
  <span class="k">new</span> <span class="nx">MockTires</span><span class="p">(),</span>
  <span class="k">new</span> <span class="nx">MockDoors</span><span class="p">()</span>
<span class="p">);</span></code></pre></figure>

<p>And guess what, <strong>this is dependency injection</strong>. To be a bit more specific, this particular pattern is also called <strong>constructor injection</strong>. There are two other injection patterns, setter injection and interface injection, but we won’t cover them in this article.</p>

<p>Okay cool, now we use DI, but when comes a DI <strong>system</strong> into play? As mentioned before, we literally moved the responsibility of dependency creation to a higher level. And this is exactly what our new problem is. Who takes care of assembling all those dependencies for us? It’s us.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Engine</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">tires</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tires</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">doors</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Doors</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="nx">engine</span><span class="p">,</span> <span class="nx">tires</span><span class="p">,</span> <span class="nx">doors</span><span class="p">);</span>

  <span class="nx">car</span><span class="p">.</span><span class="nx">drive</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<p>We need to maintain a <code class="highlighter-rouge">main</code> function now. Doing that manually can be quite hairy, especially when the application gets bigger and bigger. Wouldn’t it be nice if we could do something like this?</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Injector</span><span class="p">(...)</span>
  <span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">injector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">Car</span><span class="p">);</span>

  <span class="nx">car</span><span class="p">.</span><span class="nx">drive</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<h2 id="dependency-injection-as-a-framework">Dependency Injection as a framework</h2>

<p>This is where dependency injection as a framework comes in. As we all know, Angular 1 has it’s own DI system which allows us to annotate services and other components and let the injector find out, what dependencies need to be instantiated. For example, the following code shows how we can annotate our <code class="highlighter-rouge">Car</code> class in Angular 1:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="nx">Car</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Engine'</span><span class="p">,</span> <span class="s1">'Tires'</span><span class="p">,</span> <span class="s1">'Doors'</span><span class="p">];</span></code></pre></figure>

<p>Then, we register our <code class="highlighter-rouge">Car</code> as a service and whenever we ask for it, we get a singleton instance of it without needing to care about creating needed dependencies for the car.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,</span> <span class="p">[]);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'Car'</span><span class="p">,</span> <span class="nx">Car</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'OtherService'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Car</span><span class="p">)</span> <span class="p">{</span> 
  <span class="c1">// instance of Car available</span>
<span class="p">});</span></code></pre></figure>

<p>This is all cool but it turns out, that the existing DI has some problem though:</p>

<ul>
  <li><strong>Internal cache</strong> - Dependencies are served as singletons. Whenever we ask for a service, it is created only once per application lifecycle. Creating factory machinery is quite hairy.</li>
  <li><strong>Namespace collision</strong> - There can only be one token of a “type” in an application. If we have a car service, and there’s a third-party extension that also introduces a service with the same name, we have a problem.</li>
  <li><strong>Built into the framework</strong> - Angular 1’s DI is baked right into the framework. There’s no way for us to use it decoupled as a standalone system.</li>
</ul>

<p>These problems need to be solved in order to take the DI of Angular to the next level.</p>

<h2 id="dependency-injection-in-angular">Dependency Injection in Angular</h2>

<div class="thtrm-tldr">

  <h3 id="attention">Attention</h3>

  <p><br />
The <code class="highlighter-rouge">ReflectiveInjector</code> APIs discussed in this article are deprecated as of <a href="https://github.com/angular/angular/commit/fcadbf4bf6d00ea5b250a8069e05b3e4bd000a29">this commit</a>.</p>

  <p>To learn about the newer <code class="highlighter-rouge">StaticInjector</code> API, head over to <a href="#new-staticinjector-apis">this section</a>. However, concepts are still exactly the same, so it’s worthwhile to keep on reading.</p>
</div>

<p>Before we take a look at actual code, let’s first understand the concept behind the new DI in Angular. The following graphic illustrates required components in the new DI system:</p>

<p><img alt="DI in Angular" src="/images/di-in-angular2-5.svg" style="margin-top: 3em;" /></p>

<p>The DI in Angular basically consists of three things:</p>

<ul>
  <li><strong>Injector</strong> - The injector object that exposes APIs to us to create instances of dependencies.</li>
  <li><strong>Provider</strong> - A provider is like a recipe that tells the injector <strong>how</strong> to create an instance of a dependency. A provider takes a token and maps that to a factory function that creates an object.</li>
  <li><strong>Dependency</strong> - A dependency is the <strong>type</strong> of which an object should be created.</li>
</ul>

<p>Okay, now that we have an idea of what the concept looks like, lets see how this is translated to code. We stick with our <code class="highlighter-rouge">Car</code> class and it’s dependencies. Here’s how we can use Angular’s DI to get an instance of <code class="highlighter-rouge">Car</code>:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">ReflectiveInjector</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">ReflectiveInjector</span><span class="p">.</span><span class="nx">resolveAndCreate</span><span class="p">([</span>
  <span class="nx">Car</span><span class="p">,</span>
  <span class="nx">Engine</span><span class="p">,</span>
  <span class="nx">Tires</span><span class="p">,</span>
  <span class="nx">Doors</span>
<span class="p">]);</span>
          
<span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">injector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">Car</span><span class="p">);</span></code></pre></figure>

<p>We import <code class="highlighter-rouge">ReflectiveInjector</code> from Angular which is an injector implementation that exposes some static APIs to create injectors. <code class="highlighter-rouge">resolveAndCreate()</code> is basically a factory function that creates an injector and takes a list of providers. We’ll explore how those classes are supposed to be providers in a second, but for now we focus on <code class="highlighter-rouge">injector.get()</code>. See how we ask for an instance of <code class="highlighter-rouge">Car</code> in the last line? How does our injector know, which dependencies need to be created in order to instantiate a car? A look at our <code class="highlighter-rouge">Car</code> class will explain…</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Inject</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="p">@</span><span class="nd">Inject</span><span class="p">(</span><span class="nx">Engine</span><span class="p">)</span> <span class="nx">engine</span><span class="p">,</span>
    <span class="p">@</span><span class="nd">Inject</span><span class="p">(</span><span class="nx">Tires</span><span class="p">)</span> <span class="nx">tires</span><span class="p">,</span>
    <span class="p">@</span><span class="nd">Inject</span><span class="p">(</span><span class="nx">Doors</span><span class="p">)</span> <span class="nx">doors</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>We import something called <code class="highlighter-rouge">Inject</code> from the framework and apply it as decorator to our constructor parameters. If you don’t know what decorators are, you might want to read our articles on <a href="/angular/2015/05/03/the-difference-between-annotations-and-decorators.html">the difference between decorators and annotations</a> and how to <a href="/angular/2015/05/09/writing-angular-2-code-in-es5.html">write Angular code in ES5</a>.</p>

<p>The <code class="highlighter-rouge">Inject</code> decorator attaches meta data to our <code class="highlighter-rouge">Car</code> class, that is then consumed by the DI system afterwards. So basically what we’re doing here, is that we tell the DI that the first constructor parameter should be an instance of type <code class="highlighter-rouge">Engine</code>, the second of type <code class="highlighter-rouge">Tires</code> and the third of type <code class="highlighter-rouge">Doors</code>. We can rewrite this code to TypeScript, which feels a bit more natural:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">engine</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span> <span class="nx">tires</span><span class="p">:</span> <span class="nx">Tires</span><span class="p">,</span> <span class="nx">doors</span><span class="p">:</span> <span class="nx">Doors</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Nice, our class declares it’s own dependencies and the DI can read that information to instantiate whatever is needed to create an object of <code class="highlighter-rouge">Car</code>. But how does the injector know <strong>how</strong> to create such an object? This is where the providers come into play. Remember the <code class="highlighter-rouge">resolveAndCreate()</code> method in which we passed a list of classes?</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">ReflectiveInjector</span><span class="p">.</span><span class="nx">resolveAndCreate</span><span class="p">([</span>
  <span class="nx">Car</span><span class="p">,</span>
  <span class="nx">Engine</span><span class="p">,</span>
  <span class="nx">Tires</span><span class="p">,</span>
  <span class="nx">Doors</span>
<span class="p">]);</span></code></pre></figure>

<p>Again, you might wonder how this list of classes is supposed to be a list of providers. Well, it turns out that this is actually a shorthand syntax. If we translate this to the longer, more verbose, syntax, things might become a bit more clear.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">RelfectiveInjector</span><span class="p">.</span><span class="nx">resolveAndCreate</span><span class="p">([</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Car</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">Car</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">Engine</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Tires</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">Tires</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Doors</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">Doors</span> <span class="p">}</span>
<span class="p">]);</span></code></pre></figure>

<p>We have an object with a <code class="highlighter-rouge">provide</code> property, that maps a <strong>token</strong> to a configuration object. The token can either be a type or a string. If you read those providers now, it’s much easier to understand what’s happening. We provide an instance of type <code class="highlighter-rouge">Car</code> via the class <code class="highlighter-rouge">Car</code>,  type <code class="highlighter-rouge">Engine</code> via the class <code class="highlighter-rouge">Engine</code> and so on and so forth. This is the recipe mechanism we were talking about earlier. So with the providers we not only let the injector know which dependencies are used across the application, we also configure how objects of these dependencies are created.</p>

<p>Now the next question comes up: When do we want to use the longer instead of the shorthand syntax? There’s no reason to write <code class="highlighter-rouge">{ provide: Foo, useClass: Foo}</code> if we could just stick with <code class="highlighter-rouge">Foo</code>, right? Yes, that’s correct. That’s why we started with the shorthand syntax in the first place. However, the longer syntax enables us to do something very very powerful. Take a look at the next code snippet.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span> <span class="nl">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span> <span class="nx">useClass</span><span class="p">:</span> <span class="nx">OtherEngine</span> <span class="p">}</span></code></pre></figure>

<p>Right. We can map a token to pretty much what ever we want. Here we’re mapping the token <code class="highlighter-rouge">Engine</code> to the class <code class="highlighter-rouge">OtherEngine</code>. Which means, when we now ask for an object of type <code class="highlighter-rouge">Engine</code>, we get an instance of class <code class="highlighter-rouge">OtherEngine</code>.</p>

<p>This is super powerful, because this allows us not only to prevent name collisions, we can also create a type as interface and bind it to a concrete implementation. In addition to that, we can swap out the actual dependency for a token in a single place without touching any other code.</p>

<p>Angular’s DI introduces a couple of other provider recipes which we explore in the next section.</p>

<h2 id="other-provider-configurations">Other provider configurations</h2>

<p>Sometimes, we don’t want to get an instance of a class, but rather just a single value of something or a factory function where more configuration is needed. That’s why the provider mechanism of Angular’s DI comes with more than just one recipe. Lets take a quick look at them.</p>

<p><strong>Providing values</strong></p>

<p>We can provide a simple value using <code class="highlighter-rouge">useValue: value</code></p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span> <span class="nl">provide</span><span class="p">:</span> <span class="s1">'some value'</span><span class="p">,</span> <span class="nx">useValue</span><span class="p">:</span> <span class="s1">'Hello World'</span> <span class="p">}</span></code></pre></figure>

<p>This comes in handy when we want to provide simple configuration values.</p>

<p><strong>Providing aliases</strong></p>

<p>We can map an alias token to another token like this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span> <span class="nl">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span> <span class="nx">useClass</span><span class="p">:</span> <span class="nx">Engine</span> <span class="p">}</span>
<span class="p">{</span> <span class="nl">provide</span><span class="p">:</span> <span class="nx">V8</span><span class="p">,</span> <span class="nx">useExisting</span><span class="p">:</span> <span class="nx">Engine</span> <span class="p">}</span></code></pre></figure>

<p><strong>Providing factories</strong></p>

<p>Yes, our beloved factories.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span> 
  <span class="nl">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span>
  <span class="nx">useFactory</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">IS_V8</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">V8Engine</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">V6Engine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Of course, a factory might have its own dependencies. Passing dependencies to factories is as easy as adding a list of tokens to the factory:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nl">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span>
  <span class="nx">useFactory</span><span class="p">:</span> <span class="p">(</span><span class="nx">car</span><span class="p">,</span> <span class="nx">engine</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="nx">deps</span><span class="p">:</span> <span class="p">[</span><span class="nx">Car</span><span class="p">,</span> <span class="nx">Engine</span><span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<h2 id="optional-dependencies">Optional Dependencies</h2>

<p>The <code class="highlighter-rouge">@Optional</code> decorator lets us declare dependencies as optional. This comes in handy if, for example, our application expects a third-party library, and in case it’s not available, it can fallback.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">Car</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(@</span><span class="nd">Optional</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">)</span> <span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// set up fallback</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>As you can see, Angular’s DI solves pretty much all issues we have with Angular 1’s DI. But there’s still one thing we haven’t talked about yet. Does the new DI still create singletons? The answer is yes.</p>

<h2 id="transient-dependencies-and-child-injectors">Transient Dependencies and Child Injectors</h2>

<p>If we need a transient dependency, something that we want a new instance every time we ask for a dependency, we have two options:</p>

<p><strong>Factories</strong> can return instances of classes. Those won’t be singletons. Note that in the following code we’re <strong>creating</strong> a factory.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span> 
  <span class="nl">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span>
  <span class="nx">useFactory</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">Engine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>We can create a <strong>child injector</strong> using <code class="highlighter-rouge">Injector.resolveAndCreateChild()</code>. A child injector introduces its own bindings and an instance of an object will be different from the parent injector’s instance.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">ReflectiveInjector</span><span class="p">.</span><span class="nx">resolveAndCreate</span><span class="p">([</span><span class="nx">Engine</span><span class="p">]);</span>
<span class="kd">var</span> <span class="nx">childInjector</span> <span class="o">=</span> <span class="nx">injector</span><span class="p">.</span><span class="nx">resolveAndCreateChild</span><span class="p">([</span><span class="nx">Engine</span><span class="p">]);</span>

<span class="nx">injector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">Engine</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">childInjector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">Engine</span><span class="p">);</span></code></pre></figure>

<p>Child injectors are even more interesting. It turns out that a child injector will look up a token binding on it’s parent injector if no binding for the given token is registered on the child injector. The following graphic visualises what happens:</p>

<p><img style="margin-bottom: 2em;" alt="Child injectors" src="/images/transient-dependencies-4.svg" /></p>

<p>The graphic shows three injectors where two of them are child injectors. Each injector gets its own configuration of providers. Now, if we ask the second child injector for an instance of type <code class="highlighter-rouge">Car</code>, the car object will be created by that child injector. However, the engine will be created by the first child injector and the tires and doors will be created by the outer most parent injector. It kind of works like a prototype chain.</p>

<p>We can even configure the <strong>visibility</strong> of dependencies, and also until where a child injector should look things up. However, this will be covered in another <a href="/angular/2015/08/20/host-and-visibility-in-angular-2-dependency-injection.html">article</a>.</p>

<h2 id="new-staticinjector-apis">New StaticInjector APIs</h2>

<p>Since version 5.0.0, <code class="highlighter-rouge">ReflectiveInjector</code> has been deprecated in favour of <code class="highlighter-rouge">StaticInjector</code> to not depend on reflection to get hold of dependencies. We don’t really have to worry about this if we aren’t dealing with creating injectors manually (because Angular does it for us). However, if we are, for whatever reason, relying on lower level injector APIs, here’s what’s different:</p>

<ul>
  <li>Creating injectors is done via <code class="highlighter-rouge">Injector.create()</code></li>
  <li>Dependencies tokens have to be listed explicitly using <code class="highlighter-rouge">deps</code> property</li>
</ul>

<p><code class="highlighter-rouge">StaticInjector</code> doesn’t really need to resolve tokens anymore as everything is supposed to be static and passed right to the configuration. That’s why there’s not <code class="highlighter-rouge">resolveAndCreate()</code>, but a <code class="highlighter-rouge">create()</code> method. Also, instead of importing <code class="highlighter-rouge">ReflectiveInjector</code>, we’re importing <code class="highlighter-rouge">Injector</code>.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="p">{</span> <span class="nx">Injector</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">injector</span> <span class="o">=</span> <span class="nx">Injector</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Car</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[</span><span class="nx">Engine</span><span class="p">,</span> <span class="nx">Tires</span><span class="p">,</span> <span class="nx">Doors</span><span class="p">]</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Engine</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Tires</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">Doors</span><span class="p">,</span> <span class="na">deps</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
<span class="p">]);</span>

<span class="kd">let</span> <span class="nx">car</span> <span class="o">=</span> <span class="nx">injector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">Car</span><span class="p">);</span></code></pre></figure>

<p>Notice in the following section we discuss how DI is used within Angular. There we don’t have to specificy <code class="highlighter-rouge">deps</code> explicitly as long as we’re defining providers in <code class="highlighter-rouge">@Component()</code> or <code class="highlighter-rouge">@NgModule()</code>.</p>

<h2 id="how-is-it-used-in-angular-then">How is it used in Angular then?</h2>

<p>Now that we’ve learned how the DI in Angular works, you might wonder how it is used in the framework itself. Do we have to create injectors manually when we build Angular components? Luckily, the Angular team spent a lot of energy and time to find a nice API that hides all the injector machinery when building components in Angular.</p>

<p>Lets take a look at the following simple Angular component.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;h1&gt;Hello !&lt;/h1&gt;'</span>
<span class="p">})</span>
<span class="kd">class</span> <span class="nx">App</span> <span class="p">{</span>
  <span class="nx">name</span> <span class="o">=</span> <span class="s1">'World'</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Nothing special here. If this is entirely new to you, you might want to read our article on <a href="/angular/2015/03/27/building-a-zippy-component-in-angular-2.html">building a zippy</a> component in Angular. Lets say we want to extend this component by using a <code class="highlighter-rouge">NameService</code> that is used in the component’s constructor. Such a service could look something like this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">NameService</span> <span class="p">{</span>
  <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Pascal'</span><span class="p">;;</span>

  <span class="nx">getName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Again, nothing special here. We just create a class. Now, to make it available in our application as an injectable, we need to pass some provider configurations to our application’s injector. But how do we do that? We haven’t even created one.</p>

<p>To boostrap an application, we define an <code class="highlighter-rouge">NgModule</code>. The <code class="highlighter-rouge">@NgModule()</code> decorator creates metadata that can include providers, just like this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">BrowserModule</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">NameService</span><span class="p">],</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span><span class="nx">App</span><span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">App</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span></code></pre></figure>

<p>That’s it. Now, to actually inject it, we just use the tools we’ve already learned about - <code class="highlighter-rouge">@Inject</code> decorators.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">App</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(@</span><span class="nd">Inject</span><span class="p">(</span><span class="nx">NameService</span><span class="p">)</span> <span class="nx">NameService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">NameService</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Or, if we prefer TypeScript, we can just add type annotations to our constructor:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">class</span> <span class="nx">App</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">NameService</span><span class="p">:</span> <span class="nx">NameService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">NameService</span><span class="p">.</span><span class="nx">getName</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Awesome! All of a sudden, we don’t have any Angular machinery at all anymore. But there’s one last thing: What if we want a different binding configuration in a specific component?</p>

<p>Lets say we have <code class="highlighter-rouge">NameService</code> as application wide injectable for the type <code class="highlighter-rouge">NameService</code>, but one particular component should get a different one? This is where the <code class="highlighter-rouge">@Component</code> decorators’ <code class="highlighter-rouge">providers</code> property comes in. It allows us to add providers to a specific component (and its child components).</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app'</span><span class="p">,</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">NameService</span><span class="p">,</span> <span class="na">useValue</span><span class="p">:</span> <span class="s1">'Thomas'</span> <span class="p">}</span>
  <span class="p">],</span>
  <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;h1&gt;Hello {{name}}!&lt;/h1&gt;'</span>
<span class="p">})</span>
<span class="kd">class</span> <span class="nx">App</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span></code></pre></figure>

<p>To make things clear: <code class="highlighter-rouge">providers</code> doesn’t configure the instances that will be injected. It configures a child injector that is created for that component. As mentioned earlier, we can also configure the visibility of our bindings, to be even more specific which component can inject what. E.g. the <code class="highlighter-rouge">viewProviders</code> property allows to make dependencies only available to a component’s view, but not its children. <s>We're going to cover that in another article.</s> Dependency injection host and visibility are covered in <a href="/angular/2015/08/20/host-and-visibility-in-angular-2-dependency-injection.html">this article</a>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The new dependency injection system in Angular solves all the problems that we have with the current DI in Angular 1. No name collisions anymore. It’s an isolated component of the framework that can be used as standalone system, without Angular itself.</p>

<p>I gave a talk about that topic at <a href="http://jsconfbp.com">JSConf Budapest 2015</a>, <s>you can find the slides <a href="http://pascalprecht.github.io/slides/dependency-injection-for-future-generations/">here</a></s>. An updated version of the slide deck is <a href="http://pascalprecht.github.io/slides/di-in-angular-2/#/">here</a>. I would like to thank <a href="http://twitter.com/iammerrick">Merrick</a> for letting me use some ideas of his talk at ng-vegas, and <a href="http://twitter.com/vojtajina">Vojta</a> who built the original version of the new dependency injection system for Angular.</p>

<p>Check out the demos below!</p>


          
  <h2 id="videos">Videos on this article</h2>
  
    
    <iframe style="width: 100%;" src="http://casts.thoughtram.io/embedded/181222346" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    
    <iframe style="width: 100%;" src="http://casts.thoughtram.io/embedded/181222347" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    
    <iframe style="width: 100%;" src="http://casts.thoughtram.io/embedded/181222396" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    
    <iframe style="width: 100%;" src="http://casts.thoughtram.io/embedded/181222348" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    
    <iframe style="width: 100%;" src="http://casts.thoughtram.io/embedded/181222349" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    
  



  <h2 id="demos">Demos</h2>
  
    
    <iframe src="http://embed.plnkr.co/EiGotX/?deferRun" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>


  



        </div>

        <section class="thtrm-ad thtrm-section thtrm-section--is-promo is-sticky">
  <img width="100" src="/images/angular2-shield-inverse.svg">
  <h3 class="thtrm-section-headline">Angular Master Class at Shopware</h3>
  <p class="thtrm-section-text">Join our upcoming public training!</p>
  <a href="https://amc-shopware.eventbrite.com?aff=blogAd" title="Angular Master Class at Shopware" id="event-cta" class="thtrm-layout-divider-cta">Get a ticket <strong>&rarr;</strong></a>
</section>

        <div class="thtrm-subscriber">
  <h3>Get updates on new articles and trainings.</h3>
  <p>Join over 1400 other developers who get our content first.</p>
  <form action="//thoughtram.us8.list-manage.com/subscribe/post?u=dfbb1507fbced5a20d9dc5698&amp;id=731f22cdca" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
    <label for="mce-EMAIL"></label>
    <input type="email" value="" name="EMAIL" placeholder="Your email address..." required>
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_dfbb1507fbced5a20d9dc5698_731f22cdca" tabindex="-1" value=""></div>
    <input type="submit" value="Subscribe" name="subscribe" class="thtrm-cta thtrm-cta--small">
  </form>
</div>



        <div class="thtrm-social-links">
            <!-- Sharingbutton Facebook -->
            <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.thoughtram.io/angular/2015/05/18/dependency-injection-in-angular-2.html" target="_blank" aria-label="Share on Facebook">
              <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M18.768,7.465H14.5V5.56c0-0.896,0.594-1.105,1.012-1.105s2.988,0,2.988,0V0.513L14.171,0.5C10.244,0.5,9.5,3.438,9.5,5.32 v2.145h-3v4h3c0,5.212,0,12,0,12h5c0,0,0-6.85,0-12h3.851L18.768,7.465z"/>
                    </g>
                </svg>
                </div>Share on Facebook</div>
            </a>

            <!-- Sharingbutton Twitter -->
            <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Dependency%20Injection%20in%20Angular&amp;url=http://blog.thoughtram.io/angular/2015/05/18/dependency-injection-in-angular-2.html" target="_blank" aria-label="Share on Twitter">
              <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M23.444,4.834c-0.814,0.363-1.5,0.375-2.228,0.016c0.938-0.562,0.981-0.957,1.32-2.019c-0.878,0.521-1.851,0.9-2.886,1.104 C18.823,3.053,17.642,2.5,16.335,2.5c-2.51,0-4.544,2.036-4.544,4.544c0,0.356,0.04,0.703,0.117,1.036 C8.132,7.891,4.783,6.082,2.542,3.332C2.151,4.003,1.927,4.784,1.927,5.617c0,1.577,0.803,2.967,2.021,3.782 C3.203,9.375,2.503,9.171,1.891,8.831C1.89,8.85,1.89,8.868,1.89,8.888c0,2.202,1.566,4.038,3.646,4.456 c-0.666,0.181-1.368,0.209-2.053,0.079c0.579,1.804,2.257,3.118,4.245,3.155C5.783,18.102,3.372,18.737,1,18.459 C3.012,19.748,5.399,20.5,7.966,20.5c8.358,0,12.928-6.924,12.928-12.929c0-0.198-0.003-0.393-0.012-0.588 C21.769,6.343,22.835,5.746,23.444,4.834z"/>
                    </g>
                </svg>
                </div>Share on Twitter</div>
            </a>

            <!-- Sharingbutton Google+ -->
            <a class="resp-sharing-button__link" href="https://plus.google.com/share?url=http%3A%2F%2Fblog.thoughtram.io/angular/2015/05/18/dependency-injection-in-angular-2.html" target="_blank" aria-label="Share on Google+">
              <div class="resp-sharing-button resp-sharing-button--google resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M11.366,12.928c-0.729-0.516-1.393-1.273-1.404-1.505c0-0.425,0.038-0.627,0.988-1.368 c1.229-0.962,1.906-2.228,1.906-3.564c0-1.212-0.37-2.289-1.001-3.044h0.488c0.102,0,0.2-0.033,0.282-0.091l1.364-0.989 c0.169-0.121,0.24-0.338,0.176-0.536C14.102,1.635,13.918,1.5,13.709,1.5H7.608c-0.667,0-1.345,0.118-2.011,0.347 c-2.225,0.766-3.778,2.66-3.778,4.605c0,2.755,2.134,4.845,4.987,4.91c-0.056,0.22-0.084,0.434-0.084,0.645 c0,0.425,0.108,0.827,0.33,1.216c-0.026,0-0.051,0-0.079,0c-2.72,0-5.175,1.334-6.107,3.32C0.623,17.06,0.5,17.582,0.5,18.098 c0,0.501,0.129,0.984,0.382,1.438c0.585,1.046,1.843,1.861,3.544,2.289c0.877,0.223,1.82,0.335,2.8,0.335 c0.88,0,1.718-0.114,2.494-0.338c2.419-0.702,3.981-2.482,3.981-4.538C13.701,15.312,13.068,14.132,11.366,12.928z M3.66,17.443 c0-1.435,1.823-2.693,3.899-2.693h0.057c0.451,0.005,0.892,0.072,1.309,0.2c0.142,0.098,0.28,0.192,0.412,0.282 c0.962,0.656,1.597,1.088,1.774,1.783c0.041,0.175,0.063,0.35,0.063,0.519c0,1.787-1.333,2.693-3.961,2.693 C5.221,20.225,3.66,19.002,3.66,17.443z M5.551,3.89c0.324-0.371,0.75-0.566,1.227-0.566l0.055,0 c1.349,0.041,2.639,1.543,2.876,3.349c0.133,1.013-0.092,1.964-0.601,2.544C8.782,9.589,8.363,9.783,7.866,9.783H7.865H7.844 c-1.321-0.04-2.639-1.6-2.875-3.405C4.836,5.37,5.049,4.462,5.551,3.89z"/>
                        <polygon points="23.5,9.5 20.5,9.5 20.5,6.5 18.5,6.5 18.5,9.5 15.5,9.5 15.5,11.5 18.5,11.5 18.5,14.5 20.5,14.5 20.5,11.5  23.5,11.5   "/>
                    </g>
                </svg>
                </div>Share on Google+</div>
            </a>
        </div>

        <h3 class="thtrm-section-headline thtrm-section-headline--with-margin">Author</h3>
        <div class="thtrm-article-author">
          <span class="thtrm-article-author-avatar"><img src="/images/author-pascal.jpg" alt="Picture of Pascal Precht"></span>
          <div class="thtrm-article-author-matter">
            <h4 class="thtrm-article-author-name">Pascal Precht</h4>
            <p class="thtrm-article-author-text">Pascal is a front-end engineer and a Angular Developer Expert nominated by Google. He created the angular-translate module, is an Angular contributor and also part of the Angular Docs Authoring team.</p>
            <p>
              <a class="thtrm-article-author-cta thtrm-article-author-cta-twitter" href="http://twitter.com/PascalPrecht" title="Pascal Precht on Twitter">Twitter</a>
              <a class="thtrm-article-author-cta" href="http://github.com/PascalPrecht" title="Pascal Precht on GitHub">GitHub</a>
            </p>
          </div>
        </div>
      </div>

      <div class="thtrm-constraint">

        
        <h4 class="thtrm-section-headline thtrm-section-headline--with-big-margin thtrm-section-headline--centered">Related Posts</h4>
        <ul class="thtrm-three-column-list thtrm-three-column-list--with-padding">
        
        
          
          <li>
            <a class="thtrm-article-card" href="/announcements/2018/04/12/rxjs-master-class-and-courseware-updates.html" title="RxJS Master Class and courseware updates">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/rxjs-master-class-and-courseware-updates.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>RxJS Master Class and courseware updates</h3>
                <p>If you've been following us for a while, you're quite aware that we're always striving to provide up-to-date and high-quality...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2018/03/05/advanced-caching-with-rxjs.html" title="Advanced caching with RxJS">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/advanced_caching.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Advanced caching with RxJS</h3>
                <p>When building web applications, performance should always be a top priority. One very efficient way to optimize the performance of...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/27/custom-overlays-with-angulars-cdk-part-two.html" title="Custom Overlays with Angular's CDK - Part 2">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/custom_overlays_2.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Custom Overlays with Angular's CDK - Part 2</h3>
                <p>In this follow-up post we demonstrate how to use Angular's CDK to build a custom overlay that looks and feels...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/20/custom-overlays-with-angulars-cdk.html" title="Custom Overlays with Angular's CDK">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/custom_overlays.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Custom Overlays with Angular's CDK</h3>
                <p>The Angular Material CDK provides us with tools to build awesome and high-quality Angular components without adopting the Material Design...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/13/easy-dialogs-with-angular-material.html" title="Easy Dialogs with Angular Material">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/easy-dialogs-with-angular-material.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Easy Dialogs with Angular Material</h3>
                <p>Building modals and dialogs isn't easy - if we do it ourselves. Angular Material comes with a powerful dialog service...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/07/26/a-web-animations-deep-dive-with-angular.html" title="A web animations deep dive with Angular">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/angular-animations.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>A web animations deep dive with Angular</h3>
                <p>Angular comes with a built-in animation system that lets us create powerful animations based on the Web Animations API. In...</p>
              </div>
            </a>
          </li>
        
        
        </ul>
        

      

      </div>
    </main>
    <footer role="contentinfo" class="thtrm-footer thtrm-footer--slim">
  <div class="thtrm-footer-text">
    <img class="thtrm-footer-logo" alt="thoughtram brain" src="/images/thoughtram-brain-white.png">
    <p>This website was created in collaboration with <a href="http://twitter.com/timche_" title="Tim Cheung on Twitter"><strong>Tim Cheung</strong></a> and <a href="http://twitter.com/tim_hartmann_" title="Tim Hartmann on Twitter"><strong>Tim Hartmann</strong></a>.</p>
    <p ><a href="http://thoughtram.io/code-of-conduct.html" title="Code of Conduct">Code of Conduct</a> &bullet; <a href="http://thoughtram.io/imprint.html" title="Legal Notice">Legal notice</a></p>
    <p class="thtrm-footer-bottom">&copy; 2014-2017 thoughtram GmbH</p>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51360648-2', 'auto');
ga('send', 'pageview');

var form = document.getElementById('search-form');
var eventCta = document.getElementById('event-cta');

if (eventCta) {

  eventCta.addEventListener('click', function (event) {
    event.preventDefault();

    setTimeout(clickLink, 1000);

    function clickLink() {
      window.location.replace(eventCta.getAttribute('href'));
    }

    ga('send', 'event', {
      eventCategory: 'Event Link',
      eventAction: 'click',
      eventLabel: eventCta.getAttribute('title'),
      hitCallback: clickLink
    });
  });
}

if (form) {

  var searchTerm = document.getElementById('search-term');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    var formSubmitted = false;

    setTimeout(submitForm, 1000);

    function submitForm() {
      if (!formSubmitted) {
        formSubmitted = true;
        form.submit();
      }
    }

    ga('send', 'event', {
      eventCategory: 'Search Form',
      eventAction: 'submit',
      eventLabel: searchTerm.value,
      hitCallback: submitForm
    });
  });
}
</script>



    <script src="/scripts/linkjuice/dist/linkjuice.js"></script>
    <script src="/scripts/main.js"></script>
  </body>
</html>
