




<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="We often want to make sure that certain data is available before a component is instantiated via routing. In this article you'll learn how to resolve route data.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="thoughtram">
    <title>Resolving route data in Angular by thoughtram</title>
    <meta name="google-site-verification" content="o9eGPEgIETEqYGombq7NiQuBIB_qa6gz1yAL7PxKyK0">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#4D8799">
    <link rel="icon" sizes="192x192" href="/images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="thoughtram">
    <link rel="apple-touch-icon" href="/images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#4D8799">

    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Resolving route data in Angular">
    <meta property="og:description" content="We often want to make sure that certain data is available before a component is instantiated via routing. In this article you'll learn how to resolve route data.">
    <meta property="og:url" content="http://blog.thoughtram.io/angular/2016/10/10/resolving-route-data-in-angular-2.html">
    <meta property="og:site_name" content="Articles by thoughtram">
    <meta property="og:image" content="http://blog.thoughtram.io/images/banner/resolving-route-data-in-angular-2.jpg">
    <meta property="og:publisher" content="http://www.facebook.com/thoughtram">

    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Resolving route data in Angular">
    <meta property="twitter:site" content="thoughtram Blog">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
  </head>
  <body class="sub-site">
    <!-- Add your site or app content here -->

    <!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <header class="thtrm-header" role="banner">
      <div class="thtrm-header-bar">
        <div class="thtrm-constraint">
          <a href="http://thoughtram.io" class="thtrm-header-logo-link" title="thoughtram.io Start Page"><h1 class="thtrm-header-logo">thoughtram</h1></a>
          <div class="thtrm-header-menu-wrapper">
            <span role="button" tabindex="0" class="thtrm-header-menu-label">Menu</span>
            <ul class="thtrm-header-menu">
              <li><a title="Training" class="thtrm-header-menu-item" href="http://thoughtram.io/training.html">Training</a></li>
              <li><a title="Code Review" class="thtrm-header-menu-item" href="http://thoughtram.io/code-review.html">Code Review</a></li>
              <li><a title="Casts" class="thtrm-header-menu-item " href="http://casts.thoughtram.io">Casts</a></li>
              <li><a title="Blog" class="thtrm-header-menu-item" href="/">Blog</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <main role="main" class="thtrm-main">
    <div class="thtrm-banner" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%), url('/images/banner/resolving-route-data-in-angular-2.jpg');">
        <hgroup class="thtrm-banner-container">
          <div class="thtrm-constraint thtrm-constraint--slim">
            <h2 class="thtrm-banner-text">Resolving route data in Angular</h2>
            <span>by <a href="http://twitter.com/" title="Pascal Precht on Twitter">Pascal Precht</a> on Oct 10, 2016, last updated on Dec 18, 2016<br>10 minute read</span>

          </div>
        </hgroup>
      </div>
      <div class="thtrm-constraint thtrm-constraint--slim">

        <section class="thtrm-ad thtrm-section thtrm-section--is-promo is-sticky">
  <img width="100" src="/images/angular2-shield-inverse.svg">
  <h3 class="thtrm-section-headline">Angular Master Class in Las Palmas</h3>
  <p class="thtrm-section-text">Join our upcoming public training!</p>
  <a href="https://www.codecamps.com/aiff4/" title="Angular Master Class in Las Palmas" id="event-cta" class="thtrm-layout-divider-cta">Get a ticket <strong>&rarr;</strong></a>
</section>

        <div class="thtrm-article">

          <p>Not long ago, we wrote about <a href="/angular/2016/07/18/guards-in-angular-2.html">Navigation Guards</a> and how they let us control the navigation flow of our application’s users. Guards like <code>CanActivate</code>, <code>CanDeactivate</code> and <code>CanLoad</code> are great when it comes to taking the decision if a user is allowed to activate a certain route, leaving a certain route, or even asynchronously loading a route.</p>

<p>However, one thing that these guards don’t allow us to do, is to ensure that certain data is loaded before a route is actually activated. For example, in a contacts application where we’re able to click on a contact to view a contact’s details, the contact data should’ve been loaded before the component we’re routing to is instantiated, otherwise we might end up with a UI that already renders its view and a few moments later, the actual data arrives (of course, there are many ways to get around this). <strong>Route resolvers</strong> allow us to do exactly that and in this article we’re going to explore how they work!</p>

<p style="text-align: center; margin-bottom: -1em;"><strong>Want to see things in action first?</strong></p>

<p class="thtrm-ctas">

  
    <a href="#demos" class="thtrm-cta thtrm-cta--small"><i class="material-icons">code</i> View Demos</a>
  

  

</p>

<div class="thtrm-toc is-sticky">
  <h3 class="no_toc" id="table-of-contents">TABLE OF CONTENTS</h3>
<ul id="markdown-toc">
  <li><a href="#understanding-the-problem" id="markdown-toc-understanding-the-problem">Understanding the problem</a></li>
  <li><a href="#defining-resolvers" id="markdown-toc-defining-resolvers">Defining resolvers</a></li>
  <li><a href="#resolvers-with-dependencies" id="markdown-toc-resolvers-with-dependencies">Resolvers with dependencies</a></li>
</ul>

</div>

<h2 id="understanding-the-problem">Understanding the problem</h2>

<p>Let’s just stick with the scenario of a contacts application. We have a route for a contacts list, and a route for contacts details. Here’s what the route configuration might look like:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ContactsListComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./contacts-list'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ContactsDetailComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./contacts-detail'</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">AppRoutes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ContactsListComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'contact/:id'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ContactsDetailComponent</span> <span class="p">}</span>
<span class="p">];</span></code></pre></div>

<p>And of course, we use that configuration to configure the router for our application:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">BrowserModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/platform-browser'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">AppRoutes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./app.routes'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">AppRoutes</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{}</span></code></pre></div>

<p>Nothing special going on here. However, if this is all new to you, you might want to read our <a href="/angular/2016/06/14/routing-in-angular-2-revisited.html">article on routing</a>.</p>

<p>Let’s take a look at the <code>ContactsDetailComponent</code>. This component is responsible of displaying contact data, so it somehow has to get access to a contact object, that matches the <code>id</code> provided in the route URL (hence the <code>:id</code> parameter in the route configuration). In our article on routing in Angular, we’ve learned that we can easily <a href="/angular/2016/06/14/routing-in-angular-2-revisited.html#access-route-parameters">access route parameters</a> using the <code>ActivatedRoute</code> like this:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ContactsService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'../contacts.service'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Contact</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'../interfaces/contact'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'contacts-detail'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s1">'...'</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ContactsDetailComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="nl">contact</span><span class="p">:</span> <span class="nx">Contact</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span>
    <span class="kr">private</span> <span class="nx">contactsService</span><span class="err">:</span> <span class="nx">ContactsService</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">route</span><span class="err">:</span> <span class="nx">ActivatedRoute</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">contactsService</span><span class="p">.</span><span class="nx">getContact</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">contact</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">contact</span> <span class="o">=</span> <span class="nx">contact</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Okay, cool. So the only thing <code>ContactsDetailComponent</code> does, is to fetch a contact object by the given id and assign that object to its local <code>contact</code> property, which then allows us to interpolate expressions like <code>{{contact.name}}</code> in the template of the component.</p>

<p>Let’s take a look at the component’s template:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h2&gt;</span>{{contact?.name}}<span class="nt">&lt;/h2&gt;</span>

<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Phone<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>{{contact?.phone}}<span class="nt">&lt;/dd&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Website<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>{{contact?.website}}<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre></div>

<p>Notice that we’ve attached Angular’s Safe Navigation Operator to all of our expressions that rely on <code>contact</code>. The reason for that is, that <code>contact</code> will be undefined at the time this component is initialized, since we’re fetching the data asynchronously. The Safe Navigation Operator ensures that Angular won’t throw any errors when we’re trying to read from an object that is <code>null</code> or <code>undefined</code>.</p>

<p>In order to demonstrate this issue, let’s assume <code>ContactsService#getContact()</code> takes 3 seconds until it emits a contact object. In fact, we can easily fake that delay right away like this:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ContactsService</span> <span class="p">{</span>

  <span class="nx">getContact</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Observable</span><span class="p">.</span><span class="nx">of</span><span class="p">({</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'Pascal Precht'</span><span class="p">,</span>
      <span class="na">website</span><span class="p">:</span> <span class="s1">'http://thoughtram.io'</span><span class="p">,</span>
    <span class="p">}).</span><span class="nx">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Take a look at the demo and notice how the UI flickers until the data arrives.</p>

<iframe src="http://embed.plnkr.co/QRoowb/?deferRun" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>Depending on our template, adding Safe Navigation Operators everywhere can be quite tiring as well. In addition to that, some constructs don’t support that operator, like <code>NgModel</code> and <code>RouterLink</code> directives. Let’s take a look at how we can solve this using route resolvers.</p>

<h2 id="defining-resolvers">Defining resolvers</h2>

<p>As mentioned ealier, route resolvers allow us to provide the needed data for a route, before the route is activated. There are different ways to create a resolver and we’ll start with the easiest: a function. A resolver is a function that returns either <code>Observable&lt;any&gt;</code>, <code>Promise&lt;any&gt;</code> or just data. This is great, because our <code>ContactsService#getContact()</code> method returns an <code>Observable&lt;Contact&gt;</code>.</p>

<p>Resolvers need to be registered via providers. Our article on <a href="/angular/2015/05/18/dependency-injection-in-angular-2.html">Dependency Injection in Angular</a> explains nicely how to make functions available via DI.</p>

<p>Here’s a resolver function that resolves with a static contact object:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">ContactsService</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="na">provide</span><span class="p">:</span> <span class="s1">'contact'</span><span class="p">,</span>
      <span class="na">useValue</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'Some Contact'</span><span class="p">,</span>
          <span class="na">website</span><span class="p">:</span> <span class="s1">'http://some.website.com'</span>
        <span class="p">};</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{}</span></code></pre></div>

<p>Let’s ignore for a second that we don’t always want to return the same contact object when this resolver is used. The point here is that we can register a simple resolver function using Angular’s dependency injection. Now, how do we attach this resolver to a route configuration? That’s pretty straight forward. All we have to do is add a <code>resolve</code> property to a route configuration, which is an object where each key points to a resolver.</p>

<p>Here’s how we add our resolver function to our route configuration:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">AppRoutes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">...</span>
  <span class="p">{</span> 
    <span class="nl">path</span><span class="p">:</span> <span class="s1">'contact/:id'</span><span class="p">,</span>
    <span class="nx">component</span><span class="err">:</span> <span class="nx">ContactsDetailComponent</span><span class="p">,</span>
    <span class="nx">resolve</span><span class="err">:</span> <span class="p">{</span>
      <span class="nl">contact</span><span class="p">:</span> <span class="s1">'contact'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">];</span></code></pre></div>

<p>That’s it? Yes! <code>'contact'</code> is the provider token we refer to when attaching resolvers to route configurations. Of course, this can also be an <a href="/angular/2016/05/23/opaque-tokens-in-angular-2.html">OpaqueToken</a>, or a class (as discussed later).</p>

<p>Now, the next thing we need to do is to change the way <code>ContactsDetailComponent</code> gets hold of the contact object. Everything that is resolved via route resolvers is exposed on an <code>ActivatedRoute</code>’s <code>data</code> property. In other words, for now we can get rid of the <code>ContactsService</code> dependency like this:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="err">@</span><span class="nx">Component</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ContactsDetailComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="nx">contact</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">route</span><span class="err">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">contact</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">'contact'</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Here’s the code in action:</p>

<iframe src="http://embed.plnkr.co/Od0Bv2/?deferRun" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>In fact, when defining a resolver as a function, we get access to the <code>ActivatedRouteSnapshot</code>, as well as the <code>RouterStateSnapshot</code> like this:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">ContactsService</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="na">provide</span><span class="p">:</span> <span class="s1">'contact'</span><span class="p">,</span>
      <span class="na">useValue</span><span class="p">:</span> <span class="p">(</span><span class="na">route</span><span class="p">:</span> <span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span> <span class="na">state</span><span class="p">:</span> <span class="nx">RouterStateSnapshot</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="p">...</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{}</span></code></pre></div>

<p>This is useful in many scenarios where we need access to things like router parameters, which we actually do. However, we also need a <code>ContactsService</code> instance, which we <strong>don’t</strong> get injected here. So how do we create resolver that need dependency injection?</p>

<h2 id="resolvers-with-dependencies">Resolvers with dependencies</h2>

<p>As we know, dependency injection works on class constructors, so what we need is a class. We can create resolvers as classes as well! The only thing we need to do, is to implement the <code>Resolve</code> interface, which ensures that our resolver class has a <code>resolve()</code> method. This <code>resolve()</code> method is pretty much the same function we have currently registered via DI.</p>

<p>Here’s what our contact resolver could look like as a class implementation:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Resolve</span><span class="p">,</span> <span class="nx">ActivatedRouteSnapshot</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ContactsService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./contacts.service'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">()</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ContactResolve</span> <span class="kr">implements</span> <span class="nx">Resolve</span><span class="o">&lt;</span><span class="nx">Contact</span><span class="o">&gt;</span> <span class="p">{</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="na">contactsService</span><span class="p">:</span> <span class="nx">ContactsService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">resolve</span><span class="p">(</span><span class="na">route</span><span class="p">:</span> <span class="nx">ActivatedRouteSnapshot</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">contactsService</span><span class="p">.</span><span class="nx">getContact</span><span class="p">(</span><span class="nx">route</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>As soon as our resolver is a class, our provider configuration becomes simpler as well, because the class can be used as provider token!</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">ContactsService</span><span class="p">,</span>
    <span class="nx">ContactResolve</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{}</span></code></pre></div>

<p>And of course, we use the same token to configure the resolver on our routes:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">AppRoutes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">...</span>
  <span class="p">{</span> 
    <span class="nl">path</span><span class="p">:</span> <span class="s1">'contact/:id'</span><span class="p">,</span>
    <span class="nx">component</span><span class="err">:</span> <span class="nx">ContactsDetailComponent</span><span class="p">,</span>
    <span class="nx">resolve</span><span class="err">:</span> <span class="p">{</span>
      <span class="nl">contact</span><span class="p">:</span> <span class="nx">ContactResolve</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">];</span></code></pre></div>

<p>Angular is smart enough to detect if a resolver is a function or a class and if it’s a class, it’ll call <code>resolve()</code> on it. Check out the demo below to see this code in action and note how Angular delays the component instantiation until the data has arrived.</p>

<iframe src="http://embed.plnkr.co/u2qR9J/?deferRun" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>Hopefully this gave you a better idea of how route resolvers in Angular work!</p>


          


  <h2 id="demos">Demos</h2>
  
  <ul>
    
    <li><a href="http://embed.plnkr.co/QRoowb/" title="Retreiving delayed route data" target="_blank">Retreiving delayed route data</a></li>
    
    <li><a href="http://embed.plnkr.co/Od0Bv2/" title="Route resolver function" target="_blank">Route resolver function</a></li>
    
    <li><a href="http://embed.plnkr.co/u2qR9J/" title="Route resolver class" target="_blank">Route resolver class</a></li>
    
  </ul>
  



        
          <section class="thtrm-ad thtrm-ad--plain thtrm-ad--border thtrm-ad-transparent thtrm-section thtrm-section--is-promo is-sticky">
<a href="https://course.machinelabs.ai" title="Order now!" id="event-cta" ><img src="/images/ml-course-ad.png"></a>
</section>


        </div>

        <div class="thtrm-subscriber">
  <h3>Get updates on new articles and trainings.</h3>
  <p>Join over 2400 other developers who get our content first.</p>
  <form action="//thoughtram.us8.list-manage.com/subscribe/post?u=dfbb1507fbced5a20d9dc5698&amp;id=731f22cdca" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
    <label for="mce-EMAIL"></label>
    <input type="email" value="" name="EMAIL" placeholder="Your email address..." required>
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_dfbb1507fbced5a20d9dc5698_731f22cdca" tabindex="-1" value=""></div>
    <input type="submit" value="Subscribe" name="subscribe" class="thtrm-cta thtrm-cta--small">
  </form>
  <p class="thtrm-form__info-text">Information on the performance measurement included in the consent, the use of the mail service provider MailChimp and on the logging of the registration and your rights of revocation can be found in our <a href="https://thoughtram.io/imprint.html" title="Privacy Statement">data protection declaration</a>.</p>
</div>



        <div class="thtrm-social-links">
            <!-- Sharingbutton Facebook -->
            <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.thoughtram.io/angular/2016/10/10/resolving-route-data-in-angular-2.html" target="_blank" aria-label="Share on Facebook">
              <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M18.768,7.465H14.5V5.56c0-0.896,0.594-1.105,1.012-1.105s2.988,0,2.988,0V0.513L14.171,0.5C10.244,0.5,9.5,3.438,9.5,5.32 v2.145h-3v4h3c0,5.212,0,12,0,12h5c0,0,0-6.85,0-12h3.851L18.768,7.465z"/>
                    </g>
                </svg>
                </div>Share on Facebook</div>
            </a>

            <!-- Sharingbutton Twitter -->
            <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Resolving%20route%20data%20in%20Angular&amp;url=http://blog.thoughtram.io/angular/2016/10/10/resolving-route-data-in-angular-2.html" target="_blank" aria-label="Share on Twitter">
              <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M23.444,4.834c-0.814,0.363-1.5,0.375-2.228,0.016c0.938-0.562,0.981-0.957,1.32-2.019c-0.878,0.521-1.851,0.9-2.886,1.104 C18.823,3.053,17.642,2.5,16.335,2.5c-2.51,0-4.544,2.036-4.544,4.544c0,0.356,0.04,0.703,0.117,1.036 C8.132,7.891,4.783,6.082,2.542,3.332C2.151,4.003,1.927,4.784,1.927,5.617c0,1.577,0.803,2.967,2.021,3.782 C3.203,9.375,2.503,9.171,1.891,8.831C1.89,8.85,1.89,8.868,1.89,8.888c0,2.202,1.566,4.038,3.646,4.456 c-0.666,0.181-1.368,0.209-2.053,0.079c0.579,1.804,2.257,3.118,4.245,3.155C5.783,18.102,3.372,18.737,1,18.459 C3.012,19.748,5.399,20.5,7.966,20.5c8.358,0,12.928-6.924,12.928-12.929c0-0.198-0.003-0.393-0.012-0.588 C21.769,6.343,22.835,5.746,23.444,4.834z"/>
                    </g>
                </svg>
                </div>Share on Twitter</div>
            </a>

            <!-- Sharingbutton Google+ -->
            <a class="resp-sharing-button__link" href="https://plus.google.com/share?url=http%3A%2F%2Fblog.thoughtram.io/angular/2016/10/10/resolving-route-data-in-angular-2.html" target="_blank" aria-label="Share on Google+">
              <div class="resp-sharing-button resp-sharing-button--google resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M11.366,12.928c-0.729-0.516-1.393-1.273-1.404-1.505c0-0.425,0.038-0.627,0.988-1.368 c1.229-0.962,1.906-2.228,1.906-3.564c0-1.212-0.37-2.289-1.001-3.044h0.488c0.102,0,0.2-0.033,0.282-0.091l1.364-0.989 c0.169-0.121,0.24-0.338,0.176-0.536C14.102,1.635,13.918,1.5,13.709,1.5H7.608c-0.667,0-1.345,0.118-2.011,0.347 c-2.225,0.766-3.778,2.66-3.778,4.605c0,2.755,2.134,4.845,4.987,4.91c-0.056,0.22-0.084,0.434-0.084,0.645 c0,0.425,0.108,0.827,0.33,1.216c-0.026,0-0.051,0-0.079,0c-2.72,0-5.175,1.334-6.107,3.32C0.623,17.06,0.5,17.582,0.5,18.098 c0,0.501,0.129,0.984,0.382,1.438c0.585,1.046,1.843,1.861,3.544,2.289c0.877,0.223,1.82,0.335,2.8,0.335 c0.88,0,1.718-0.114,2.494-0.338c2.419-0.702,3.981-2.482,3.981-4.538C13.701,15.312,13.068,14.132,11.366,12.928z M3.66,17.443 c0-1.435,1.823-2.693,3.899-2.693h0.057c0.451,0.005,0.892,0.072,1.309,0.2c0.142,0.098,0.28,0.192,0.412,0.282 c0.962,0.656,1.597,1.088,1.774,1.783c0.041,0.175,0.063,0.35,0.063,0.519c0,1.787-1.333,2.693-3.961,2.693 C5.221,20.225,3.66,19.002,3.66,17.443z M5.551,3.89c0.324-0.371,0.75-0.566,1.227-0.566l0.055,0 c1.349,0.041,2.639,1.543,2.876,3.349c0.133,1.013-0.092,1.964-0.601,2.544C8.782,9.589,8.363,9.783,7.866,9.783H7.865H7.844 c-1.321-0.04-2.639-1.6-2.875-3.405C4.836,5.37,5.049,4.462,5.551,3.89z"/>
                        <polygon points="23.5,9.5 20.5,9.5 20.5,6.5 18.5,6.5 18.5,9.5 15.5,9.5 15.5,11.5 18.5,11.5 18.5,14.5 20.5,14.5 20.5,11.5  23.5,11.5   "/>
                    </g>
                </svg>
                </div>Share on Google+</div>
            </a>
        </div>

        <h3 class="thtrm-section-headline thtrm-section-headline--with-margin">Author</h3>
        <div class="thtrm-article-author">
          <span class="thtrm-article-author-avatar"><img src="/images/author-pascal.jpg" alt="Picture of Pascal Precht"></span>
          <div class="thtrm-article-author-matter">
            <h4 class="thtrm-article-author-name">Pascal Precht</h4>
            <p class="thtrm-article-author-text">Pascal is a front-end engineer and a Angular Developer Expert nominated by Google. He created the angular-translate module, is an Angular contributor and also part of the Angular Docs Authoring team.</p>
            <p>
              <a class="thtrm-article-author-cta thtrm-article-author-cta-twitter" href="http://twitter.com/PascalPrecht" title="Pascal Precht on Twitter">Twitter</a>
              <a class="thtrm-article-author-cta" href="http://github.com/PascalPrecht" title="Pascal Precht on GitHub">GitHub</a>
            </p>
          </div>
        </div>
      </div>

      <div class="thtrm-constraint">

        
        <h4 class="thtrm-section-headline thtrm-section-headline--with-big-margin thtrm-section-headline--centered">Related Posts</h4>
        <ul class="thtrm-three-column-list thtrm-three-column-list--with-padding">
        
        
          
          <li>
            <a class="thtrm-article-card" href="/angularjs/2015/02/19/futuristic-routing-in-angular.html" title="Futuristic Routing in Angular">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/fallback.jpeg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Futuristic Routing in Angular</h3>
                <p>An this article we discuss the new router APIs and how it's going to change the way we implement component...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2016/07/18/guards-in-angular-2.html" title="Protecting Routes using Guards in Angular">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/protecting-routes-using-guards-in-angular-2.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Protecting Routes using Guards in Angular</h3>
                <p>Angular's router enables protecting routes using guards and in this article we're going to discuss how to implement them.</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2016/06/14/routing-in-angular-2-revisited.html" title="Routing in Angular revisited">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/routing-in-angular-2-revisited.jpeg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Routing in Angular revisited</h3>
                <p>Learn how to implement basic routing in your Angular application using the latest and greatest APIs!</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2015/06/16/routing-in-angular-2.html" title="Routing in Angular">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/fallback.jpeg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Routing in Angular</h3>
                <p>Learn how to route between components. In this article we explore how to use the new router in Angular.</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2018/03/05/advanced-caching-with-rxjs.html" title="Advanced caching with RxJS">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/advanced_caching.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Advanced caching with RxJS</h3>
                <p>When building web applications, performance should always be a top priority. One very efficient way to optimize the performance of...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/11/27/custom-overlays-with-angulars-cdk-part-two.html" title="Custom Overlays with Angular's CDK - Part 2">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/custom_overlays_2.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Custom Overlays with Angular's CDK - Part 2</h3>
                <p>In this follow-up post we demonstrate how to use Angular's CDK to build a custom overlay that looks and feels...</p>
              </div>
            </a>
          </li>
        
        
        </ul>
        

      

      </div>
    </main>
    <footer role="contentinfo" class="thtrm-footer thtrm-footer--slim">
  <div class="thtrm-footer-text">
    <img class="thtrm-footer-logo" alt="thoughtram brain" src="/images/thoughtram-brain-white.png">
    <p>This website was created in collaboration with <a href="http://twitter.com/timche_" title="Tim Cheung on Twitter"><strong>Tim Cheung</strong></a> and <a href="http://twitter.com/tim_hartmann_" title="Tim Hartmann on Twitter"><strong>Tim Hartmann</strong></a>.</p>
    <p ><a href="http://thoughtram.io/code-of-conduct.html" title="Code of Conduct">Code of Conduct</a> &bullet; <a href="http://thoughtram.io/imprint.html" title="Legal Notice">Legal notice</a></p>
    <p class="thtrm-footer-bottom">&copy; 2014-2017 thoughtram GmbH</p>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51360648-2', 'auto');
ga('send', 'pageview');

var form = document.getElementById('search-form');
var eventCta = document.getElementById('event-cta');

if (eventCta) {

  eventCta.addEventListener('click', function (event) {
    event.preventDefault();

    setTimeout(clickLink, 1000);

    function clickLink() {
      window.location.replace(eventCta.getAttribute('href'));
    }

    ga('send', 'event', {
      eventCategory: 'Event Link',
      eventAction: 'click',
      eventLabel: eventCta.getAttribute('title'),
      hitCallback: clickLink
    });
  });
}

if (form) {

  var searchTerm = document.getElementById('search-term');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    var formSubmitted = false;

    setTimeout(submitForm, 1000);

    function submitForm() {
      if (!formSubmitted) {
        formSubmitted = true;
        form.submit();
      }
    }

    ga('send', 'event', {
      eventCategory: 'Search Form',
      eventAction: 'submit',
      eventLabel: searchTerm.value,
      hitCallback: submitForm
    });
  });
}
</script>



    <script src="/scripts/linkjuice/dist/linkjuice.js"></script>
    <script src="/scripts/main.js"></script>
  </body>
</html>
