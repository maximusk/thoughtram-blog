




<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Another post in a series of articles to discover the magic of different Rx operators. In this article we like to learn about the very powerful flatMap operator.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="thoughtram">
    <title>Exploring Rx Operators: flatMap by thoughtram</title>
    <meta name="google-site-verification" content="o9eGPEgIETEqYGombq7NiQuBIB_qa6gz1yAL7PxKyK0">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#4D8799">
    <link rel="icon" sizes="192x192" href="/images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="thoughtram">
    <link rel="apple-touch-icon" href="/images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#4D8799">

    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Exploring Rx Operators: flatMap">
    <meta property="og:description" content="Another post in a series of articles to discover the magic of different Rx operators. In this article we like to learn about the very powerful flatMap operator.">
    <meta property="og:url" content="http://blog.thoughtram.io/rx/2016/08/01/exploring-rx-operators-flatmap.html">
    <meta property="og:site_name" content="Articles by thoughtram">
    <meta property="og:image" content="http://blog.thoughtram.io/images/banner/rx-flatmap.jpeg">
    <meta property="og:publisher" content="http://www.facebook.com/thoughtram">

    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Exploring Rx Operators: flatMap">
    <meta property="twitter:site" content="thoughtram Blog">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
  </head>
  <body class="sub-site">
    <!-- Add your site or app content here -->

    <!--[if lt IE 10]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <header class="thtrm-header" role="banner">
      <div class="thtrm-header-bar">
        <div class="thtrm-constraint">
          <a href="http://thoughtram.io" class="thtrm-header-logo-link" title="thoughtram.io Start Page"><h1 class="thtrm-header-logo">thoughtram</h1></a>
          <div class="thtrm-header-menu-wrapper">
            <span role="button" tabindex="0" class="thtrm-header-menu-label">Menu</span>
            <ul class="thtrm-header-menu">
              <li><a title="Training" class="thtrm-header-menu-item" href="http://thoughtram.io/training.html">Training</a></li>
              <li><a title="Code Review" class="thtrm-header-menu-item" href="http://thoughtram.io/code-review.html">Code Review</a></li>
              <li><a title="Casts" class="thtrm-header-menu-item " href="http://casts.thoughtram.io">Casts</a></li>
              <li><a title="Blog" class="thtrm-header-menu-item" href="/">Blog</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <main role="main" class="thtrm-main">
    <div class="thtrm-banner" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%), url('/images/banner/rx-flatmap.jpeg');">
        <hgroup class="thtrm-banner-container">
          <div class="thtrm-constraint thtrm-constraint--slim">
            <h2 class="thtrm-banner-text">Exploring Rx Operators: flatMap</h2>
            <span>by <a href="http://twitter.com/" title="Christoph Burgdorf on Twitter">Christoph Burgdorf</a> on Aug 1, 2016<br>9 minute read</span>

          </div>
        </hgroup>
      </div>
      <div class="thtrm-constraint thtrm-constraint--slim">

        <section class="thtrm-ad thtrm-section thtrm-section--is-promo is-sticky">
  <img width="100" src="/images/angular2-shield-inverse.svg">
  <h3 class="thtrm-section-headline">Angular Master Class in Las Palmas</h3>
  <p class="thtrm-section-text">Join our upcoming public training!</p>
  <a href="https://www.codecamps.com/aiff4/" title="Angular Master Class in Las Palmas" id="event-cta" class="thtrm-layout-divider-cta">Get a ticket <strong>&rarr;</strong></a>
</section>

        <div class="thtrm-article">

          <p>This is another post in a series of articles to discover the magic of different Rx operators. In our last article, <a href="/angular/2016/05/16/exploring-rx-operators-map.html">Exploring Rx Operators: map</a> we learned how we can map the notifications of Observables to create other more meaningful Observables.</p>

<p>Today we like to move our attention to another very important and also related operator, namely <code>flatMap</code>. In the same way that the <code>map</code> operator is closely related to the <code>map</code> function that we know from Arrays, <code>flatMap</code> should sound familiar to many people who worked with collections in a functional programming kind of way. In fact, the similarity is so strong that it makes sense to first move our attention to a collection based example.</p>

<div id="thtrm-toc is-sticky">
  <h3 class="no_toc" id="table-of-contents">TABLE OF CONTENTS</h3>
<ul id="markdown-toc">
  <li><a href="#understanding-flatmap-for-collections" id="markdown-toc-understanding-flatmap-for-collections">Understanding <code>flatMap</code> for collections</a></li>
  <li><a href="#understanding-flatmap-for-observables" id="markdown-toc-understanding-flatmap-for-observables">Understanding <code>flatMap</code> for Observables</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

</div>

<h2 id="understanding-flatmap-for-collections">Understanding <code>flatMap</code> for collections</h2>

<p>Consider the following collection of invoices where each invoice has a property <code>positions</code> holding the individual items of the invoice. Thatâ€™s a pretty common (yet simplified) structure of pretty much every e-commerce system out there.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">invoices</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">date</span><span class="p">:</span> <span class="s1">'07-29-2016'</span><span class="p">,</span>
    <span class="na">customerId</span><span class="p">:</span> <span class="mi">4711</span><span class="p">,</span>
    <span class="na">positions</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Superhero shirt'</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Batman mask'</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">date</span><span class="p">:</span> <span class="s1">'07-29-2016'</span><span class="p">,</span>
    <span class="na">customerId</span><span class="p">:</span> <span class="mi">4712</span><span class="p">,</span>
    <span class="na">positions</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Batman car'</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Spiderman suit'</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span></code></pre></div>

<p>What if we are interested in a collection of all <em>positions</em>? Of course we could simply loop through all invoices and push the positions into a new shared collection.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">positions</span> <span class="o">=</span> <span class="p">[];</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">inv</span> <span class="nx">of</span> <span class="nx">invoices</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">positions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inv</span><span class="p">.</span><span class="nx">positions</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">positions</span><span class="p">);</span></code></pre></div>

<p>But <a href="http://jsbin.com/ziveloviqa/edit?js,console">thatâ€™s</a> very imperative and focuses a lot on the actual implementation. What we rather like to have is a declarative solution that focuses on <em>what</em> we want to achieve. Coming from a collection of invoices, we want to retrieve a collection of positions.</p>

<p>In the functional programming world thereâ€™s a <code>flatMap</code> function for exactly this use case.</p>

<p>Unfortunately native JavaScript Arrays donâ€™t have a <code>flatMap</code> function yet. However, we can reach for the popular <a href="http://lodash.com">lodash</a> library and rewrite the code to use <code>flatMap</code> with that.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">positions</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">flatMap</span><span class="p">(</span><span class="nx">invoices</span><span class="p">,</span> <span class="nx">inv</span> <span class="o">=&gt;</span> <span class="nx">inv</span><span class="p">.</span><span class="nx">positions</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">positions</span><span class="p">);</span></code></pre></div>

<p>We just <a href="http://jsbin.com/cuwowuliru/edit?html,js,console">replaced</a> four lines of code with a single one that is far easier to follow. This declarative solution doesnâ€™t move our intention to the actual implementation. We donâ€™t even know whether itâ€™s using a for loop behind the scenes or not. Once you become familar with the vocabulary the code becomes much easier to understand then itâ€™s imperative counterpart. Pretty neat, no?</p>

<p>What <code>flatMap</code> does is, it goes through each invoice in our collection and applies our function which maps to the array of positions. It then flattens all the positions into a single collection, hence the name <code>flatMap</code>. Just to make it very clear: A simple <code>map</code> isnâ€™t suitable here because it would leave us with an array of arrays which is not quite what we want.</p>

<p>By now you may be wondering what this has to do with <code>flatMap</code> from the Rx library. The good news is, if youâ€™ve understand the example above, understanding <code>flatMap</code> for Observables isnâ€™t a far stretch. In fact, itâ€™s very similar.</p>

<h2 id="understanding-flatmap-for-observables">Understanding <code>flatMap</code> for Observables</h2>

<p>Remember that Observables are very much like collections with the difference that items are <em>pushed</em> to us as they arrive instead of being pulled out. In our example above we had a collection of invoices where each invoice had a collection of positions. Can we have an Observable of invoices where each invoice has an Observable of positions? Well, we could make that up but it would suggest that we have invoices where the positions may arrive asynchronously.</p>

<p>A better suited example may be an Observable of tweets where each tweet has an Observable of like actions. A <code>LikeAction</code> is a simple enum with two variants <code>Like</code> and <code>Unlike</code>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">enum</span> <span class="nx">LikeAction</span> <span class="p">{</span>
  <span class="nx">Like</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">Unlike</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">}</span></code></pre></div>

<p>We can assign the values <code>1</code> and <code>-1</code> to the variants so that we can easily accumulate a total count of them later.</p>

<p>A <code>Tweet</code> is a simple class with a <code>text</code> property of type <code>string</code> and a <code>likes</code> property of type <code>Observable&lt;LikeAction&gt;</code>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">class</span> <span class="nx">Tweet</span> <span class="p">{</span>
  <span class="nx">likes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">LikeAction</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="nx">constructor</span> <span class="p">(</span><span class="kr">public</span> <span class="nx">text</span><span class="err">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span></code></pre></div>

<p>Donâ€™t get confused by the use of <code>Subject</code> here. A subject is an <code>Observable</code> that one can not only subscribe to but also raise notifications on which is exactly what we need to mock the actions.</p>

<p>Now that we have our basic models we can create an <code>Observable&lt;Tweet&gt;</code> and save a reference to it. Again, weâ€™re using <code>Subject</code> for the purpose of mocking out our notifications.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">tweets</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">Tweet</span><span class="o">&gt;</span><span class="p">();</span></code></pre></div>

<p>Tweets are pushed through the <code>Observable&lt;Tweet&gt;</code> as they arrive. Whenever someone likes or unlikes a tweet the <code>Observable&lt;LikeAction&gt;</code> on that tweet pushes a new notification.</p>

<p>To make a tweet we have to create an instance of <code>Tweet</code> and pass it to <code>next</code> on our tweets <code>Subject</code>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">firstTweet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tweet</span><span class="p">(</span><span class="s1">'first tweet'</span><span class="p">);</span>
<span class="nx">tweets</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">firstTweet</span><span class="p">);</span></code></pre></div>

<p>Adding or removing likes is as simple as calling <code>likes.next(val)</code> with either <code>LikeAction.Like</code> or <code>LikeAction.Unlike</code>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">//increases likes</span>
<span class="nx">firstTweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">LikeAction</span><span class="p">.</span><span class="nx">Like</span><span class="p">);</span>

<span class="c1">//decreases likes</span>
<span class="nx">firstTweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">LikeAction</span><span class="p">.</span><span class="nx">Unlike</span><span class="p">);</span></code></pre></div>

<p>Now that we have set up the ground work letâ€™s come to the interesting part. We like to be able to keep track of all likes/unlikes so that we can show the total number of likes of all tweets.</p>

<p>Remember the imperative for loop that we wrote in the previous example to collect all positions manually? We could kind of do the same here to calculate the total number of likes <a href="http://jsbin.com/yoximomuji/1/edit?js,console">manually</a>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">likeCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">tweets</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">tweet</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">tweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">likeAction</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">likeCount</span> <span class="o">=</span> <span class="nx">likeCount</span> <span class="o">+</span> <span class="nx">likeAction</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">Total</span> <span class="na">Likes</span><span class="p">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">likeCount</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span></code></pre></div>

<blockquote>
  <p><strong>Special tip:</strong> Donâ€™t get confused, the fact that we can accumulate our <code>LikeActions</code> is simply because we assigned <code>1</code> and <code>-1</code> to them.</p>
</blockquote>

<p>But just as we used <code>flatMap</code> to get one single collection of positions of all the invoices we can use <code>flatMap</code> <a href="http://jsbin.com/lupazehuve/1/edit?js,console">here</a> to get one single <code>Observable</code> for all like actions of all the tweets.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">likeCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">tweets</span><span class="p">.</span><span class="nx">flatMap</span><span class="p">(</span><span class="nx">tweet</span> <span class="o">=&gt;</span> <span class="nx">tweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">like</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">likeCount</span> <span class="o">=</span> <span class="nx">likeCount</span> <span class="o">+</span> <span class="nx">like</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="na">Likes</span><span class="p">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">likeCount</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
      <span class="p">});</span></code></pre></div>

<blockquote>
  <p><strong>Special tip:</strong> This is a perfect use case for the <code>scan</code> operator which can help us to get rid of the manual book-keeping in the <code>likeCount</code> variable. But letâ€™s not get ahead of ourselves.</p>
</blockquote>

<p>So what does the above code do? For each tweet that gets pushed to us <code>flatMap</code> maps to the <code>Observable&lt;LikeAction&gt;</code> on the <code>likes</code> property. It subscribes to these Observables and flattens the notifications into a single <code>Observable&lt;LikeAction&gt;</code> that we can then subscribe to.</p>

<p>The full working code of our example looks like this.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">enum</span> <span class="nx">LikeAction</span> <span class="p">{</span>
  <span class="nx">Like</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">Unlike</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">Tweet</span> <span class="p">{</span>
  <span class="nx">likes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">LikeAction</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="nx">constructor</span> <span class="p">(</span><span class="kr">public</span> <span class="nx">text</span><span class="err">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">tweets</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">Tweet</span><span class="o">&gt;</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">likeCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nx">tweets</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">tweet</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tweet</span><span class="p">.</span><span class="nx">text</span><span class="p">));</span>

<span class="nx">tweets</span><span class="p">.</span><span class="nx">flatMap</span><span class="p">(</span><span class="nx">tweet</span> <span class="o">=&gt;</span> <span class="nx">tweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">likeAction</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">likeCount</span> <span class="o">=</span> <span class="nx">likeCount</span> <span class="o">+</span> <span class="nx">likeAction</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">Total</span> <span class="na">Likes</span><span class="p">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">likeCount</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
      <span class="p">});</span>

<span class="kd">let</span> <span class="nx">firstTweet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tweet</span><span class="p">(</span><span class="s1">'first tweet'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">secondTweet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tweet</span><span class="p">(</span><span class="s1">'second tweet'</span><span class="p">);</span>

<span class="nx">tweets</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">firstTweet</span><span class="p">);</span>
<span class="nx">tweets</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">secondTweet</span><span class="p">);</span>

<span class="nx">firstTweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">LikeAction</span><span class="p">.</span><span class="nx">Like</span><span class="p">);</span>
<span class="nx">secondTweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">LikeAction</span><span class="p">.</span><span class="nx">Like</span><span class="p">);</span>
<span class="nx">secondTweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">LikeAction</span><span class="p">.</span><span class="nx">Like</span><span class="p">);</span>
<span class="nx">secondTweet</span><span class="p">.</span><span class="nx">likes</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">LikeAction</span><span class="p">.</span><span class="nx">Unlike</span><span class="p">);</span></code></pre></div>

<p>When we run the code we see the following output.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">first</span> <span class="nx">tweet</span>
<span class="nx">second</span> <span class="nx">tweet</span>
<span class="nx">Total</span> <span class="nx">Likes</span><span class="err">:</span> <span class="mi">1</span>
<span class="nx">Total</span> <span class="nx">Likes</span><span class="err">:</span> <span class="mi">2</span>
<span class="nx">Total</span> <span class="nx">Likes</span><span class="err">:</span> <span class="mi">3</span>
<span class="nx">Total</span> <span class="nx">Likes</span><span class="err">:</span> <span class="mi">2</span></code></pre></div>

<h2 id="conclusion">Conclusion</h2>

<p>Observables are really powerful. They allow us to to compose asynchronous tasks in a functional reactive way. Because they share so many similarities with collections we can apply a lot of our knowledge from popular libraries such as lodash.</p>


          




        
          <section class="thtrm-ad thtrm-ad--plain thtrm-ad--border thtrm-ad-transparent thtrm-section thtrm-section--is-promo is-sticky">
<a href="https://course.machinelabs.ai" title="Order now!" id="event-cta" ><img src="/images/ml-course-ad.png"></a>
</section>


        </div>

        <div class="thtrm-subscriber">
  <h3>Get updates on new articles and trainings.</h3>
  <p>Join over 2400 other developers who get our content first.</p>
  <form action="//thoughtram.us8.list-manage.com/subscribe/post?u=dfbb1507fbced5a20d9dc5698&amp;id=731f22cdca" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
    <label for="mce-EMAIL"></label>
    <input type="email" value="" name="EMAIL" placeholder="Your email address..." required>
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_dfbb1507fbced5a20d9dc5698_731f22cdca" tabindex="-1" value=""></div>
    <input type="submit" value="Subscribe" name="subscribe" class="thtrm-cta thtrm-cta--small">
  </form>
  <p class="thtrm-form__info-text">Information on the performance measurement included in the consent, the use of the mail service provider MailChimp and on the logging of the registration and your rights of revocation can be found in our <a href="https://thoughtram.io/imprint.html" title="Privacy Statement">data protection declaration</a>.</p>
</div>



        <div class="thtrm-social-links">
            <!-- Sharingbutton Facebook -->
            <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.thoughtram.io/rx/2016/08/01/exploring-rx-operators-flatmap.html" target="_blank" aria-label="Share on Facebook">
              <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M18.768,7.465H14.5V5.56c0-0.896,0.594-1.105,1.012-1.105s2.988,0,2.988,0V0.513L14.171,0.5C10.244,0.5,9.5,3.438,9.5,5.32 v2.145h-3v4h3c0,5.212,0,12,0,12h5c0,0,0-6.85,0-12h3.851L18.768,7.465z"/>
                    </g>
                </svg>
                </div>Share on Facebook</div>
            </a>

            <!-- Sharingbutton Twitter -->
            <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Exploring%20Rx%20Operators:%20flatMap&amp;url=http://blog.thoughtram.io/rx/2016/08/01/exploring-rx-operators-flatmap.html" target="_blank" aria-label="Share on Twitter">
              <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M23.444,4.834c-0.814,0.363-1.5,0.375-2.228,0.016c0.938-0.562,0.981-0.957,1.32-2.019c-0.878,0.521-1.851,0.9-2.886,1.104 C18.823,3.053,17.642,2.5,16.335,2.5c-2.51,0-4.544,2.036-4.544,4.544c0,0.356,0.04,0.703,0.117,1.036 C8.132,7.891,4.783,6.082,2.542,3.332C2.151,4.003,1.927,4.784,1.927,5.617c0,1.577,0.803,2.967,2.021,3.782 C3.203,9.375,2.503,9.171,1.891,8.831C1.89,8.85,1.89,8.868,1.89,8.888c0,2.202,1.566,4.038,3.646,4.456 c-0.666,0.181-1.368,0.209-2.053,0.079c0.579,1.804,2.257,3.118,4.245,3.155C5.783,18.102,3.372,18.737,1,18.459 C3.012,19.748,5.399,20.5,7.966,20.5c8.358,0,12.928-6.924,12.928-12.929c0-0.198-0.003-0.393-0.012-0.588 C21.769,6.343,22.835,5.746,23.444,4.834z"/>
                    </g>
                </svg>
                </div>Share on Twitter</div>
            </a>

            <!-- Sharingbutton Google+ -->
            <a class="resp-sharing-button__link" href="https://plus.google.com/share?url=http%3A%2F%2Fblog.thoughtram.io/rx/2016/08/01/exploring-rx-operators-flatmap.html" target="_blank" aria-label="Share on Google+">
              <div class="resp-sharing-button resp-sharing-button--google resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                <svg version="1.1" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                    <g>
                        <path d="M11.366,12.928c-0.729-0.516-1.393-1.273-1.404-1.505c0-0.425,0.038-0.627,0.988-1.368 c1.229-0.962,1.906-2.228,1.906-3.564c0-1.212-0.37-2.289-1.001-3.044h0.488c0.102,0,0.2-0.033,0.282-0.091l1.364-0.989 c0.169-0.121,0.24-0.338,0.176-0.536C14.102,1.635,13.918,1.5,13.709,1.5H7.608c-0.667,0-1.345,0.118-2.011,0.347 c-2.225,0.766-3.778,2.66-3.778,4.605c0,2.755,2.134,4.845,4.987,4.91c-0.056,0.22-0.084,0.434-0.084,0.645 c0,0.425,0.108,0.827,0.33,1.216c-0.026,0-0.051,0-0.079,0c-2.72,0-5.175,1.334-6.107,3.32C0.623,17.06,0.5,17.582,0.5,18.098 c0,0.501,0.129,0.984,0.382,1.438c0.585,1.046,1.843,1.861,3.544,2.289c0.877,0.223,1.82,0.335,2.8,0.335 c0.88,0,1.718-0.114,2.494-0.338c2.419-0.702,3.981-2.482,3.981-4.538C13.701,15.312,13.068,14.132,11.366,12.928z M3.66,17.443 c0-1.435,1.823-2.693,3.899-2.693h0.057c0.451,0.005,0.892,0.072,1.309,0.2c0.142,0.098,0.28,0.192,0.412,0.282 c0.962,0.656,1.597,1.088,1.774,1.783c0.041,0.175,0.063,0.35,0.063,0.519c0,1.787-1.333,2.693-3.961,2.693 C5.221,20.225,3.66,19.002,3.66,17.443z M5.551,3.89c0.324-0.371,0.75-0.566,1.227-0.566l0.055,0 c1.349,0.041,2.639,1.543,2.876,3.349c0.133,1.013-0.092,1.964-0.601,2.544C8.782,9.589,8.363,9.783,7.866,9.783H7.865H7.844 c-1.321-0.04-2.639-1.6-2.875-3.405C4.836,5.37,5.049,4.462,5.551,3.89z"/>
                        <polygon points="23.5,9.5 20.5,9.5 20.5,6.5 18.5,6.5 18.5,9.5 15.5,9.5 15.5,11.5 18.5,11.5 18.5,14.5 20.5,14.5 20.5,11.5  23.5,11.5   "/>
                    </g>
                </svg>
                </div>Share on Google+</div>
            </a>
        </div>

        <h3 class="thtrm-section-headline thtrm-section-headline--with-margin">Author</h3>
        <div class="thtrm-article-author">
          <span class="thtrm-article-author-avatar"><img src="/images/author-christoph.jpg" alt="Picture of Christoph Burgdorf"></span>
          <div class="thtrm-article-author-matter">
            <h4 class="thtrm-article-author-name">Christoph Burgdorf</h4>
            <p class="thtrm-article-author-text">Christoph began programming at the age of 10. He is the creator of the Nickel.rs web framework and a contributor of the AngularJS project. Christoph is also part of the Angular Docs Authoring team.</p>
            <p>
              <a class="thtrm-article-author-cta thtrm-article-author-cta-twitter" href="http://twitter.com/cburgdorf" title="Christoph Burgdorf on Twitter">Twitter</a>
              <a class="thtrm-article-author-cta" href="http://github.com/cburgdorf" title="Christoph Burgdorf on GitHub">GitHub</a>
            </p>
          </div>
        </div>
      </div>

      <div class="thtrm-constraint">

        
        <h4 class="thtrm-section-headline thtrm-section-headline--with-big-margin thtrm-section-headline--centered">Related Posts</h4>
        <ul class="thtrm-three-column-list thtrm-three-column-list--with-padding">
        
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2018/03/05/advanced-caching-with-rxjs.html" title="Advanced caching with RxJS">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/advanced_caching.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Advanced caching with RxJS</h3>
                <p>When building web applications, performance should always be a top priority. One very efficient way to optimize the performance of...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/rxjs/2017/08/24/taming-snakes-with-reactive-streams.html" title="Taming snakes with reactive streams">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/reactive_snake.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Taming snakes with reactive streams</h3>
                <p>Reactive Programming is revolutionary but it's not always straightforward and requires a fundamental shift in mindset. In this post, we'll...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/05/08/angular-master-class-redux-and-ngrx.html" title="Angular Master Class - Redux and ngrx">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/ngrx_slide_logo.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Angular Master Class - Redux and ngrx</h3>
                <p>Today we're super excited to announce that we finished working on our new Angular Master Class courseware. Read on for...</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2017/02/27/three-things-you-didnt-know-about-the-async-pipe.html" title="Three things you didn't know about the AsyncPipe">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/three-things-about-the-async-pipe.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Three things you didn't know about the AsyncPipe</h3>
                <p>This article explains three lesser known features of the AsyncPipe that help us to write better async code.</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2016/06/16/cold-vs-hot-observables.html" title="Cold vs Hot Observables">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/hot-vs-cold-observables.jpeg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Cold vs Hot Observables</h3>
                <p>In this article we are going to demystify what the term hot vs cold means when it comes to Observables....</p>
              </div>
            </a>
          </li>
        
          
          <li>
            <a class="thtrm-article-card" href="/angular/2016/05/16/exploring-rx-operators-map.html" title="Exploring Rx Operators: map">
              <div class="thtrm-article-card-image" style="background-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.01) 2%,#29383E 100%),url(/images/banner/rx-map.jpg);"></div>
              <div class="thtrm-article-card-content ">
                <h3>Exploring Rx Operators: map</h3>
                <p>This is the first article that is part of a new series where we take a look at different operators...</p>
              </div>
            </a>
          </li>
        
        
        </ul>
        

      

      </div>
    </main>
    <footer role="contentinfo" class="thtrm-footer thtrm-footer--slim">
  <div class="thtrm-footer-text">
    <img class="thtrm-footer-logo" alt="thoughtram brain" src="/images/thoughtram-brain-white.png">
    <p>This website was created in collaboration with <a href="http://twitter.com/timche_" title="Tim Cheung on Twitter"><strong>Tim Cheung</strong></a> and <a href="http://twitter.com/tim_hartmann_" title="Tim Hartmann on Twitter"><strong>Tim Hartmann</strong></a>.</p>
    <p ><a href="https://thoughtram.io/code-of-conduct.html" title="Code of Conduct">Code of Conduct</a> &bullet; <a href="https://thoughtram.io/imprint.html" title="Legal Notice">Legal notice</a></p>
    <p class="thtrm-footer-bottom">&copy; 2014-2018 thoughtram GmbH</p>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51360648-2', 'auto');
ga('set', 'anonymizeIp', true);
ga('send', 'pageview');

var form = document.getElementById('search-form');
var eventCta = document.getElementById('event-cta');

if (eventCta) {

  eventCta.addEventListener('click', function (event) {
    event.preventDefault();

    setTimeout(clickLink, 1000);

    function clickLink() {
      window.location.replace(eventCta.getAttribute('href'));
    }

    ga('send', 'event', {
      eventCategory: 'Event Link',
      eventAction: 'click',
      eventLabel: eventCta.getAttribute('title'),
      hitCallback: clickLink
    });
  });
}

if (form) {

  var searchTerm = document.getElementById('search-term');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    var formSubmitted = false;

    setTimeout(submitForm, 1000);

    function submitForm() {
      if (!formSubmitted) {
        formSubmitted = true;
        form.submit();
      }
    }

    ga('send', 'event', {
      eventCategory: 'Search Form',
      eventAction: 'submit',
      eventLabel: searchTerm.value,
      hitCallback: submitForm
    });
  });
}
</script>



    <script src="/scripts/linkjuice/dist/linkjuice.js"></script>
    <script src="/scripts/main.js"></script>
  </body>
</html>
